<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Django : Day 9 | Quick Reference</title>
<meta name=keywords content="Django,Python,Email,Middleware,Token,User Management,Backend,Web Development"><meta name=description content="Learn how to send emails, use middleware, generate tokens, and manage users in Django."><meta name=author content="Nirajan Khatiwada"><link rel=canonical href=http://localhost:1313/posts/pages/django/django-9/><link crossorigin=anonymous href=/assets/css/stylesheet.54405a410796490bc874ab6181fac9b675753cc2b91375d8f882566459eca428.css integrity="sha256-VEBaQQeWSQvIdKthgfrJtnV1PMK5E3XY+IJWZFnspCg=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/icon.png><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/pages/django/django-9/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:title" content="Django : Day 9"><meta property="og:description" content="Learn how to send emails, use middleware, generate tokens, and manage users in Django."><meta property="og:type" content="article"><meta property="og:url" content="http://localhost:1313/posts/pages/django/django-9/"><meta property="og:image" content="http://localhost:1313/images/django/django.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-10T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-10T00:00:00+00:00"><meta property="og:site_name" content="Quick Reference"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/django/django.jpg"><meta name=twitter:title content="Django : Day 9"><meta name=twitter:description content="Learn how to send emails, use middleware, generate tokens, and manage users in Django."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"Django : Day 9","item":"http://localhost:1313/posts/pages/django/django-9/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Django : Day 9","name":"Django : Day 9","description":"Learn how to send emails, use middleware, generate tokens, and manage users in Django.","keywords":["Django","Python","Email","Middleware","Token","User Management","Backend","Web Development"],"articleBody":"Sending Email Using Django Django provide an inbuild support to send email. To send email using DJango you need to configure the email settings in the settings.py file.\nEMAIL_HOST: The host to use for sending email. EMAIL_PORT: The port to use for the SMTP server. EMAIL_HOST_USER: The username to use for the SMTP server. EMAIL_HOST_PASSWORD: The password to use for the SMTP server. EMAIL_USE_SSL: Whether to use an SSL (secure) connection. EMAIL_USE_TLS: Whether to use a TLS (secure) connection Then we can send email using EmailMultiAlternatives class. This class is used to send email with both HTML and text content. Below is the example to send email using Django.\nfrom django.core.mail import EmailMultiAlternatives function send_email(request): email = EmailMultiAlternatives( 'Subject here', 'Here is the message.', 'ID NAME ', [receiver email] ) email.attach_alternative('Here is the message.', \"text/html\") email.send() return HttpResponse('Email sent') Note: Message will be send if the html content is not supported by the email client.\nrendertostring() method rendertostring() method is used to render a template to a string. This method is used to render a template to a string instead of rendering it to an HttpResponse object. Below is the example to render a template to a string.They are specially useful when you want to send the rendered template as an email.\nfrom django.template.loader import rendertostring def my_view(request): context = {'name': 'Alice'} output = rendertostring('index.html', context) return HttpResponse(output) Django Middleware Between each request and response in Django, there is a middleware layer. Middleware is a framework of hooks into Django’s request/response processing. It’s a light, low-level plugin system for globally altering Django’s input or output.There are two level of middleware in django\nGlobal Middleware: Global middleware is applied to all the views in the Django application. Local Middleware: Local middleware is applied to a specific view in the Django application. Defining Middleware To define a middleware in Django, you need to create a class with the following methods:\n__init__(self, get_response): This method is called when the middleware is initialized. It takes a get_response parameter, which is a callable that can be used to get the response from the next middleware in the chain. __call__(self, request): This method is called for each request. It takes a request parameter, which is the request object. It should return a response object or call the get_response callable to get the response from the next middleware in the chain. class MyMiddleware: def __init__(self, get_response): self.get_response = get_response def __call__(self, request): # Code to be executed for each request before # the view (and later middleware) are called. response = self.get_response(request) # Code to be executed for each request/response after # the view is called. return response Global Middleware To add this middleware to each request, you need to add the middleware class to the MIDDLEWARE setting in the settings.py file.\nMIDDLEWARE = [ ... 'myapp.middleware.MyMiddleware', ... ] Local Middleware To add this middleware to a specific view, you need to use the @middleware_classes decorator on the view function.\nfrom middleware import MyMiddleware @MyMiddleware def my_view(request): ... In class based view you can use the middleware_classes attribute to add the middleware to the view.\nfrom middleware import MyMiddleware from django.utils.decorators import method_decorator class MyView(View): @method_decorator(MyMiddleware) def get(self, request): ... Generating Tokens There are two types of tokens generator in Django\nPassword Reset Token: Django provides a built-in password reset token generator that can be used to generate tokens for resetting passwords. Default Token Generator: Django provides a default token generator that can be used to generate tokens for various purposes. Password Reset Token To generate a password reset token, you can use the PasswordResetTokenGenerator class from the django.contrib.auth.tokens module. You can create an instance of this class and call the make_token() method to generate a token for a user.\nfrom django.contrib.auth.tokens import PasswordResetTokenGenerator def generate_reset_token(request): user = request.user token_generator = PasswordResetTokenGenerator().make_token(user) return HttpResponse(token) from django.contrib.auth.tokens import PasswordResetTokenGenerator def check_reset_token(request, token): user = request.user token_generator = PasswordResetTokenGenerator().check_token(user, token) if token_generator: return HttpResponse('Token is valid') else: return HttpResponse('Token is invalid') Default Token Generator To generate a default token, you can use the default_token_generator from the django.utils.token module. You can call the make_token() method to generate a token for a user.\nfrom django.contrib.auth.tokens import default_token_generator def generate_token(request): user = request.user token = default_token_generator.make_token(user) return HttpResponse(token) from django.contrib.auth.tokens import default_token_generator def check_token(request, token): user = request.user token_generator = default_token_generator.check_token(user, token) if token_generator: return HttpResponse('Token is valid') else: return HttpResponse('Token is invalid') User object in django The User object in Django is a built-in model that represents a user account.The inbuilt User model in Django provides the following fields:\nusername password email first_name last_name is_active is_staff is_superuser date_joined staff Are the user who can access the admin interface.\nsuperuser Are the user who have all the permissions in the Django application.\nis_active Are the user who are active in the Django application.Only active user can login to the Django application.This three fields are boolean fields and have default value False.\nCreating a User TO create a user you can use create() method of the User model.\nfrom django.contrib.auth.models import User user = User.objects.create(username='alice',email='alice@gmail.com') user.set_password('password') user.save() Note: set_password() method is used to set the password of the user in the hashed format.\nNote: you can use get_user_model() method to get the user model in Django.\nfrom django.contrib.auth import get_user_model User = get_user_model() user = User.objects.create(username='alice',username='alice',email='alice@gmail.com') user.set_password('password') user.save() Authenticating a User TO learn authentication in django be familiar with the following methods\nrequest.user : The user object of the currently logged in user. request.user.is_authenticated : A boolean value that indicates whether the user is authenticated or not. request.user.is_staff : A boolean value that indicates whether the user is a staff member or not. request.user.is_superuser : A boolean value that indicates whether the user is a superuser or not. Authenticate To authenticate a user, you can use the authenticate() method from the django.contrib.auth module. This method takes the request, username and password as arguments and returns the user object if the credentials are valid.\nfrom django.contrib.auth import authenticate user = authenticate(request, username='alice', password='password') Login To login a user, you can use the login() method from the django.contrib.auth module. This method takes the request and the user object as arguments and logs in the user.\nfrom django.contrib.auth import login login(request, user) Logout To logout a user, you can use the logout() method from the django.contrib.auth module. This method takes the request as an argument and logs out the user.\nfrom django.contrib.auth import logout logout(request) Combination of authenticate(),login() and logout() from django.contrib.auth import authenticate, login, logout def login_view(request): if request.method == 'POST': username = request.POST['username'] password = request.POST['password'] user = authenticate(request, username=username, password=password) if user is not None: login(request, user) return HttpResponse('User logged in successfully') else: return HttpResponse('Invalid username or password') return render(request, 'login.html') Protected Views To protect a view so that only authenticated users can access it, you can use the login_required decorator from the django.contrib.auth.decorators module.\nfrom django.contrib.auth.decorators import login_required @login_required(login_url='login') def protected_view(request): return HttpResponse('This is a protected view') Note: The login_url argument is used to redirect the user to the login page if they are not authenticated and login is name of the login url.\nCustom User Model Everytime you create a new Django project, Django creates a default User model for you. But sometimes you may want to customize the User model to add additional fields or change the existing fields.So there are two ways to create a custom user model in Django.\nUsing Abstract User(Contains all the fields of the default User model and you can add additional fields to it) Using Abstract Base User( Contain the authentication fields only and you can add additional fields to it) Using Abstract User You choose this option if you want to add additional fields to the default .You choose this if you want a small change in the default User model.\nProcess to create a custom user model using Abstract User Step 1: Create a new model that inherits from AbstractUser models.py\nfrom django.contrib.auth.models import AbstractUser class CustomUser(AbstractUser): age = models.PositiveIntegerField(null=True, blank=True) address = models.CharField(max_length=100, null=True, blank=True) phone = models.CharField(max_length=15, null=True, blank=True) Note : There is existing field and age,address,phone are the additional fields that we have added to the User model.\nStep 2: Update the AUTH_USER_MODEL setting in settings.py settings.py\nAUTH_USER_MODEL = 'myapp.CustomUser' Note: AUTH_USER_MODEL is used to specify which model to use for the user authentication.get_user_model() method is used to get the user model in Django which is specified in the AUTH_USER_MODEL setting.\nStep 3: Create a new migration and apply it python manage.py makemigrations python manage.py migrate Step 4: Create a new user from myapp.models import CustomUser user = CustomUser.objects.create(username='alice',email='alice@gmail.com',age=20,address='New York',phone='1234567890') user.set_password('password') user.save() or,\nfrom django.contrib.auth import get_user_model CustomUser = get_user_model() user = CustomUser.objects.create(username='alice',email='alice@gmail.com',age=20,address='New York',phone='1234567890') user.set_password('password') user.save() Registering with admin interface To make the custom user model available in the admin interface, you need to register it with the admin interface.\nfrom django.contrib import admin from myapp.models import CustomUser admin.site.register(CustomUser) Using Abstract Base User In Abstract Base user it contains only the authentication functionality but no actual fields exceptpassword and lastlogin.\nProcess to create a custom user model using Abstract Base User Step 1: Create a new model that inherits from AbstractBaseUser models.py\nfrom django.contrib.auth.models import AbstractBaseUser, BaseUserManager,PermissionsMixin class CustomUser(AbstractBaseUser,PermissionsMixin): email = models.EmailField(unique=True) age = models.PositiveIntegerField(null=True, blank=True) address = models.CharField(max_length=100, null=True, blank=True) phone = models.CharField(max_length=15, null=True, blank=True) is_staff = models.BooleanField(default=False) is_active = models.BooleanField(default=True) objects = CustomUserManager() USERNAME_FIELD = 'email' REQUIRED_FIELDS = ['phone'] def __str__(self): return self.email Note: USERNAME_FIELD is used to specify the field that is used for authentication and REQUIRED_FIELDS is used to specify the fields that are required when creating a user using the createsuperuser command.\nNote: AbstractBaseUser only contains password and lastlogin fields and you need to define the fields that you want to add to the user model.\nNote: PermissionMinxing contains the permission fields is_superuser,groups and user_permissions fields.\nStep 2: Create a new manager class that inherits from BaseUserManager BaseUserManager is used to create a user and superuser.Django internally uses this manager to create a user and superuser.\nmodels.py\nfrom django.contrib.auth.models import BaseUserManager class CustomUserManager(BaseUserManager): def create_user(self,email,password=None,**extra_fields): if not email: raise ValueError('The Email field must be set') if not password: raise ValueError('The Password field must be set') email = self.normalize_email(email) user = self.model(email=email,**extra_fields) user.set_password(password) user.save(using=self._db) return user def create_superuser(self,email,password=None,**extra_fields): extra_fields.setdefault('is_staff',True) extra_fields.setdefault('is_superuser',True) return self.create_user(email,password,**extra_fields) Step 3: Update the AUTH_USER_MODEL setting in settings.py settings.py\nAUTH_USER_MODEL = 'myapp.CustomUser' Step 4: Create a new migration and apply it python manage.py makemigrations python manage.py migrate Step 5: Setting The Admin Interface using UserAdmin To make the custom user model available in the admin interface, you need to create a new class that inherits from UserAdmin and register it with the admin interface.\nfrom django.contrib import admin from django.contrib.auth.admin import UserAdmin from myapp.models import CustomUser class CustomUserAdmin(UserAdmin): model = CustomUser fieldsets = ( (\"Basic Information\", {'fields': ('email', 'password')}), (\"Personal Information\", {'fields': ('age', 'address', 'phone')}), (\"Permissions\", {'fields': ('is_active', 'is_staff', 'is_superuser')}), ) add_fieldsets = ( (\"Basic Information\", {'fields': ('email', 'password1', 'password2')}), (\"Personal Information\", {'fields': ('age', 'address', 'phone')}), (\"Permissions\", {'fields': ('is_active', 'is_staff', 'is_superuser')}), ) ordering = ('email',) list_display = ('email', 'age', 'address', 'phone', 'is_active', 'is_staff', 'is_superuser') admin.site.register(CustomUser, CustomUserAdmin) Custom Authentication In Django All the authentication in Django is done using the authenticate() method from the django.contrib.auth module. This method takes the request, username and password as arguments and returns the user object if the credentials are valid.But sometimes you may want to customize the authentication process in Django. You can do this by creating a custom authentication backend.\nProcess to create a custom authentication backend Step 1: Create a new class that inherits from BaseBackend You need to create a new class that inherits from BaseBackend and implement the authenticate() method. This method should take the request, username and password as arguments and return the user object if the credentials are valid.\nfrom django.contrib.auth.backends import BaseBackend from django.contrib.auth import get_user_model class CustomBackend(BaseBackend): def authenticate(self, request, username=None, password=None): User = get_user_model() try: user = User.objects.get(email=username) if user.check_password(password): return user except User.DoesNotExist: return None def get_user(self, user_id): User = get_user_model() try: return User.objects.get(pk=user_id) except User.DoesNotExist: return None Step 2: Update the AUTHENTICATION_BACKENDS setting in settings.py You need to update the AUTHENTICATION_BACKENDS setting in the settings.py file to include the path to the custom authentication backend.\nAUTHENTICATION_BACKENDS = [ 'myapp.backends.CustomBackend', 'django.contrib.auth.backends.ModelBackend', ] Step 3: Authenticate the user using the custom authentication backend You can now authenticate the user using the custom authentication backend by calling the authenticate() method from the django.contrib.auth module.\nfrom django.contrib.auth import authenticate user = authenticate(request,usernmae='alice',password='password') Groups in Django Groups in Django are a way to categorize users into different groups based on their roles or permissions. Each group can have multiple permissions, and each user can belong to multiple groups. Groups are useful for managing permissions and access control in Django applications.\nCreating a Group To create a group, you can use the Group model from the django.contrib.auth.models module. You can create an instance of this model and call the save() method to save the group to the database.\nfrom django.contrib.auth.models import Group group = Group(name='Admins') group.save() Get Group By Name To get a group by name, you can use the get() method of the Group model. This method takes the name of the group as an argument and returns the group object if it exists.\nfrom django.contrib.auth.models import Group group = Group.objects.get(name='Admins') Adding User TO Group To add a user to a group, you can use the user.groups.add() method. This method takes the group object as an argument and adds the user to the group.\nfrom django.contrib.auth.models import User, Group user = User.objects.get(username='alice') group1 = Group.objects.get(name='Admins') group2 = Group.objects.get(name='Editors') user.groups.add(group1, group2) Removing User From Group To remove a user from a group, you can use the user.groups.remove() method. This method takes the group object as an argument and removes the user from the group.\nfrom django.contrib.auth.models import User, Group user = User.objects.get(username='alice') group1 = Group.objects.get(name='Admins') group2 = Group.objects.get(name='Editors') user.groups.remove(group1, group2) Clear All The Groups To remove all the groups from a user, you can use the user.groups.clear() method. This method removes all the groups from the user.\nfrom django.contrib.auth.models import User user = User.objects.get(username='alice') user.groups.clear() Get All The Groups Of A User To get all the groups of a user, you can use the user.groups.all() method. This method returns all the groups that the user belongs to.\nfrom django.contrib.auth.models import User user = User.objects.get(username='alice') groups = user.groups.all() Permissions in Django Permission is given to user so that they can perform certain actions in the Django application from the admin interface.\nDefault Permissions Django provides the following default permissions:\nadd_modelname: Allows the user to add new objects of the model. change_modelname: Allows the user to change existing objects of the model. delete_modelname: Allows the user to delete objects of the model. view_modelname: Allows the user to view objects of the model. Custom Permissions Every time the default permissions are not sufficient for the application, you can create custom permissions using the Permission model from the django.contrib.auth.models or by using the Meta class in the model.\nUsing Meta Class class MyModelName(models.Model): # code class Meta: permissions = [ ('have_special', 'Have Special Feature'), ] Using Code Creating a Permission from django.contrib.auth.models import Permission from django.contrib.contenttypes.models import ContentType content_type = ContentType.objects.get_for_model(MyModelName) permission = Permission.objects.create( codename='have_special', name='Have Special Feature', content_type=content_type, ) Some Useful Methods of Permission Get Permission object using codename from django.contrib.auth.models import Permission permission = Permission.objects.get(codename='have_special') Delete Permission from django.contrib.auth.models import Permission permission = Permission.objects.get(codename='have_special') permission.delete() Assigning Permission to User from django.contrib.auth.models import User, Permission from myapp.models import User user = User.objects.get(username='alice') permission1 = Permission.objects.get(codename='have_special') permission2 = Permission.objects.get(codename='add_mymodelname') user.user_permissions.add(permission1, permission2) Removing Permission from User from django.contrib.auth.models import User, Permission user = User.objects.get(username='alice') permission1 = Permission.objects.get(codename='have_special') permission2 = Permission.objects.get(codename='add_mymodelname') user.user_permissions.remove(permission1, permission2) Clear All The Permissions from django.contrib.auth.models import User user = User.objects.get(username='alice') user.user_permissions.clear() See All The Permissions Of A User from django.contrib.auth.models import User user = User.objects.get(username='alice') permissions = user.user_permissions.all() Assigning Permission to Group from django.contrib.auth.models import Group, Permission group = Group.objects.get(name='Admins') permission1 = Permission.objects.get(codename='have_special') permission2 = Permission.objects.get(codename='add_mymodelname') group.permissions.add(permission1, permission2) Removing Permission from Group from django.contrib.auth.models import Group, Permission group = Group.objects.get(name='Admins') permission1 = Permission.objects.get(codename='have_special') permission2 = Permission.objects.get(codename='add_mymodelname') group.permissions.remove(permission1, permission2) See All The Permissions Of A Group from django.contrib.auth.models import Group group = Group.objects.get(name='Admins') permissions = group.permissions.all() Check whether the user has permission user.has_perm('myapp.have_special') Restricting Access to Views To restrict access to a view based on permissions, you can use the permission_required decorator from the django.contrib.auth.decorators module.\nfrom django.contrib.auth.decorators import permission_required @permission_required('myapp.have_special') def special_view(request): return HttpResponse('This is a special view') This will be enough to learn DRF. I hope you enjoyed this series. If you have any questions or suggestions, feel free to ask. Thank you for reading. Happy coding!🚀🚀🚀 ","wordCount":"2764","inLanguage":"en","image":"http://localhost:1313/images/django/django.jpg","datePublished":"2025-01-10T00:00:00Z","dateModified":"2025-01-10T00:00:00Z","author":{"@type":"Person","name":"Nirajan Khatiwada"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/pages/django/django-9/"},"publisher":{"@type":"Organization","name":"Quick Reference","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Quick Reference (Alt + H)">Quick Reference</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">Django : Day 9</h1><div class=post-description>Learn how to send emails, use middleware, generate tokens, and manage users in Django.</div><div class=post-meta><span title='2025-01-10 00:00:00 +0000 UTC'>January 10, 2025</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;2764 words&nbsp;·&nbsp;Nirajan Khatiwada&nbsp;|&nbsp;<a href=https://github.com/nirajan-khatiwada/quick-reference/tree/main/content/posts/pages/django/django-9.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#rendertostring-method>rendertostring() method</a></li></ul><ul><li><a href=#defining-middleware>Defining Middleware</a></li><li><a href=#global-middleware>Global Middleware</a></li><li><a href=#local-middleware>Local Middleware</a></li></ul><ul><li><a href=#password-reset-token>Password Reset Token</a></li><li><a href=#default-token-generator>Default Token Generator</a></li><li><a href=#user-object-in-django>User object in django</a></li><li><a href=#creating-a-user>Creating a User</a></li><li><a href=#authenticating-a-user>Authenticating a User</a><ul><li><a href=#authenticate>Authenticate</a></li><li><a href=#login>Login</a></li><li><a href=#logout>Logout</a></li></ul></li><li><a href=#combination-of-authenticatelogin-and-logout>Combination of authenticate(),login() and logout()</a></li><li><a href=#protected-views>Protected Views</a></li><li><a href=#custom-user-model>Custom User Model</a><ul><li><a href=#using-abstract-user>Using Abstract User</a></li></ul></li><li><a href=#process-to-create-a-custom-user-model-using-abstract-user>Process to create a custom user model using Abstract User</a><ul><li><a href=#step-1-create-a-new-model-that-inherits-from-abstractuser>Step 1: Create a new model that inherits from AbstractUser</a></li><li><a href=#step-2-update-the-auth_user_model-setting-in-settingspy>Step 2: Update the AUTH_USER_MODEL setting in settings.py</a></li><li><a href=#step-3-create-a-new-migration-and-apply-it>Step 3: Create a new migration and apply it</a></li><li><a href=#step-4-create-a-new-user>Step 4: Create a new user</a></li><li><a href=#registering-with-admin-interface>Registering with admin interface</a></li><li><a href=#using-abstract-base-user>Using Abstract Base User</a></li></ul></li><li><a href=#process-to-create-a-custom-user-model-using-abstract-base-user>Process to create a custom user model using Abstract Base User</a><ul><li><a href=#step-1-create-a-new-model-that-inherits-from-abstractbaseuser>Step 1: Create a new model that inherits from AbstractBaseUser</a></li><li><a href=#step-2-create-a-new-manager-class-that-inherits-from-baseusermanager>Step 2: Create a new manager class that inherits from BaseUserManager</a></li><li><a href=#step-3-update-the-auth_user_model-setting-in-settingspy>Step 3: Update the AUTH_USER_MODEL setting in settings.py</a></li><li><a href=#step-4-create-a-new-migration-and-apply-it>Step 4: Create a new migration and apply it</a></li><li><a href=#step-5-setting-the-admin-interface-using-useradmin>Step 5: Setting The Admin Interface using UserAdmin</a></li></ul></li><li><a href=#custom-authentication-in-django>Custom Authentication In Django</a></li><li><a href=#process-to-create-a-custom-authentication-backend>Process to create a custom authentication backend</a><ul><li><a href=#step-1-create-a-new-class-that-inherits-from-basebackend>Step 1: Create a new class that inherits from <code>BaseBackend</code></a></li><li><a href=#step-2-update-the-authentication_backends-setting-in-settingspy>Step 2: Update the AUTHENTICATION_BACKENDS setting in settings.py</a></li><li><a href=#step-3-authenticate-the-user-using-the-custom-authentication-backend>Step 3: Authenticate the user using the custom authentication backend</a></li></ul></li><li><a href=#groups-in-django>Groups in Django</a><ul><li><a href=#creating-a-group>Creating a Group</a></li><li><a href=#get-group-by-name>Get Group By Name</a></li><li><a href=#adding-user-to-group>Adding User TO Group</a></li><li><a href=#removing-user-from-group>Removing User From Group</a></li><li><a href=#clear-all-the-groups>Clear All The Groups</a></li><li><a href=#get-all-the-groups-of-a-user>Get All The Groups Of A User</a></li></ul></li><li><a href=#permissions-in-django>Permissions in Django</a><ul><li><a href=#default-permissions>Default Permissions</a></li><li><a href=#custom-permissions>Custom Permissions</a></li><li><a href=#some-useful-methods-of-permission>Some Useful Methods of Permission</a></li><li><a href=#assigning-permission-to-group>Assigning Permission to Group</a></li><li><a href=#removing-permission-from-group>Removing Permission from Group</a></li><li><a href=#see-all-the-permissions-of-a-group>See All The Permissions Of A Group</a></li><li><a href=#check-whether-the-user-has-permission>Check whether the user has permission</a></li><li><a href=#restricting-access-to-views>Restricting Access to Views</a></li></ul></li></ul></nav></div></details></div><div class=post-content><h1 id=sending-email-using-django>Sending Email Using Django<a hidden class=anchor aria-hidden=true href=#sending-email-using-django>#</a></h1><p>Django provide an inbuild support to send email. To send email using DJango you need to configure the email settings in the <code>settings.py</code> file.</p><ul><li><code>EMAIL_HOST</code>: The host to use for sending email.</li><li><code>EMAIL_PORT</code>: The port to use for the SMTP server.</li><li><code>EMAIL_HOST_USER</code>: The username to use for the SMTP server.</li><li><code>EMAIL_HOST_PASSWORD</code>: The password to use for the SMTP server.</li><li><code>EMAIL_USE_SSL</code>: Whether to use an SSL (secure) connection.</li><li><code>EMAIL_USE_TLS</code>: Whether to use a TLS (secure) connection</li></ul><p>Then we can send email using EmailMultiAlternatives class. This class is used to send email with both HTML and text content. Below is the example to send email using Django.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.core.mail <span style=color:#f92672>import</span> EmailMultiAlternatives
</span></span><span style=display:flex><span>function send_email(request):
</span></span><span style=display:flex><span>    email <span style=color:#f92672>=</span> EmailMultiAlternatives(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;Subject here&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;Here is the message.&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;ID NAME &lt;sender email&gt;&#39;</span>,
</span></span><span style=display:flex><span>        [receiver email]
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    email<span style=color:#f92672>.</span>attach_alternative(<span style=color:#e6db74>&#39;&lt;h1&gt;Here is the message.&lt;/h1&gt;&#39;</span>, <span style=color:#e6db74>&#34;text/html&#34;</span>)
</span></span><span style=display:flex><span>    email<span style=color:#f92672>.</span>send()
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;Email sent&#39;</span>)
</span></span></code></pre></div><blockquote><p>Note: Message will be send if the html content is not supported by the email client.</p></blockquote><h2 id=rendertostring-method>rendertostring() method<a hidden class=anchor aria-hidden=true href=#rendertostring-method>#</a></h2><p><code>rendertostring()</code> method is used to render a template to a string. This method is used to render a template to a string instead of rendering it to an HttpResponse object. Below is the example to render a template to a string.They are specially useful when you want to send the rendered template as an email.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.template.loader <span style=color:#f92672>import</span> rendertostring
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_view</span>(request):
</span></span><span style=display:flex><span>    context <span style=color:#f92672>=</span> {<span style=color:#e6db74>&#39;name&#39;</span>: <span style=color:#e6db74>&#39;Alice&#39;</span>}
</span></span><span style=display:flex><span>    output <span style=color:#f92672>=</span> rendertostring(<span style=color:#e6db74>&#39;index.html&#39;</span>, context)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(output)
</span></span></code></pre></div><h1 id=django-middleware>Django Middleware<a hidden class=anchor aria-hidden=true href=#django-middleware>#</a></h1><p>Between each request and response in Django, there is a middleware layer. Middleware is a framework of hooks into Django&rsquo;s request/response processing. It&rsquo;s a light, low-level plugin system for globally altering Django&rsquo;s input or output.There are two level of middleware in django</p><ul><li><strong>Global Middleware</strong>: Global middleware is applied to all the views in the Django application.</li><li><strong>Local Middleware</strong>: Local middleware is applied to a specific view in the Django application.</li></ul><h2 id=defining-middleware>Defining Middleware<a hidden class=anchor aria-hidden=true href=#defining-middleware>#</a></h2><p>To define a middleware in Django, you need to create a class with the following methods:</p><ul><li><code>__init__(self, get_response)</code>: This method is called when the middleware is initialized. It takes a <code>get_response</code> parameter, which is a callable that can be used to get the response from the next middleware in the chain.</li><li><code>__call__(self, request)</code>: This method is called for each request. It takes a <code>request</code> parameter, which is the request object. It should return a response object or call the <code>get_response</code> callable to get the response from the next middleware in the chain.</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyMiddleware</span>:
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __init__(self, get_response):
</span></span><span style=display:flex><span>        self<span style=color:#f92672>.</span>get_response <span style=color:#f92672>=</span> get_response
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __call__(self, request):
</span></span><span style=display:flex><span>        <span style=color:#75715e># Code to be executed for each request before</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># the view (and later middleware) are called.</span>
</span></span><span style=display:flex><span>        response <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>get_response(request)
</span></span><span style=display:flex><span>        <span style=color:#75715e># Code to be executed for each request/response after</span>
</span></span><span style=display:flex><span>        <span style=color:#75715e># the view is called.</span>
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> response
</span></span></code></pre></div><h2 id=global-middleware>Global Middleware<a hidden class=anchor aria-hidden=true href=#global-middleware>#</a></h2><p>To add this middleware to each request, you need to add the middleware class to the <code>MIDDLEWARE</code> setting in the <code>settings.py</code> file.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>MIDDLEWARE <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;myapp.middleware.MyMiddleware&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><h2 id=local-middleware>Local Middleware<a hidden class=anchor aria-hidden=true href=#local-middleware>#</a></h2><p>To add this middleware to a specific view, you need to use the <code>@middleware_classes</code> decorator on the view function.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> middleware <span style=color:#f92672>import</span> MyMiddleware
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@MyMiddleware</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>my_view</span>(request):
</span></span><span style=display:flex><span>    <span style=color:#f92672>...</span>
</span></span></code></pre></div><p>In class based view you can use the <code>middleware_classes</code> attribute to add the middleware to the view.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> middleware <span style=color:#f92672>import</span> MyMiddleware
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.utils.decorators <span style=color:#f92672>import</span> method_decorator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyView</span>(View):
</span></span><span style=display:flex><span>   <span style=color:#a6e22e>@method_decorator</span>(MyMiddleware)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request):
</span></span><span style=display:flex><span>        <span style=color:#f92672>...</span>
</span></span></code></pre></div><h1 id=generating-tokens>Generating Tokens<a hidden class=anchor aria-hidden=true href=#generating-tokens>#</a></h1><p>There are two types of tokens generator in Django</p><ul><li><strong>Password Reset Token</strong>: Django provides a built-in password reset token generator that can be used to generate tokens for resetting passwords.</li><li><strong>Default Token Generator</strong>: Django provides a default token generator that can be used to generate tokens for various purposes.</li></ul><h2 id=password-reset-token>Password Reset Token<a hidden class=anchor aria-hidden=true href=#password-reset-token>#</a></h2><p>To generate a password reset token, you can use the <code>PasswordResetTokenGenerator</code> class from the <code>django.contrib.auth.tokens</code> module. You can create an instance of this class and call the <code>make_token()</code> method to generate a token for a user.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.tokens <span style=color:#f92672>import</span> PasswordResetTokenGenerator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_reset_token</span>(request):
</span></span><span style=display:flex><span>    user <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>user
</span></span><span style=display:flex><span>    token_generator <span style=color:#f92672>=</span> PasswordResetTokenGenerator()<span style=color:#f92672>.</span>make_token(user)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(token)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.tokens <span style=color:#f92672>import</span> PasswordResetTokenGenerator
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>check_reset_token</span>(request, token):
</span></span><span style=display:flex><span>    user <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>user
</span></span><span style=display:flex><span>    token_generator <span style=color:#f92672>=</span> PasswordResetTokenGenerator()<span style=color:#f92672>.</span>check_token(user, token)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> token_generator:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;Token is valid&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;Token is invalid&#39;</span>)
</span></span></code></pre></div><h2 id=default-token-generator>Default Token Generator<a hidden class=anchor aria-hidden=true href=#default-token-generator>#</a></h2><p>To generate a default token, you can use the <code>default_token_generator</code> from the <code>django.utils.token</code> module. You can call the <code>make_token()</code> method to generate a token for a user.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.tokens <span style=color:#f92672>import</span> default_token_generator
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>generate_token</span>(request):
</span></span><span style=display:flex><span>    user <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>user
</span></span><span style=display:flex><span>    token <span style=color:#f92672>=</span> default_token_generator<span style=color:#f92672>.</span>make_token(user)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(token)
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.tokens <span style=color:#f92672>import</span> default_token_generator
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>check_token</span>(request, token):
</span></span><span style=display:flex><span>    user <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>user
</span></span><span style=display:flex><span>    token_generator <span style=color:#f92672>=</span> default_token_generator<span style=color:#f92672>.</span>check_token(user, token)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> token_generator:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;Token is valid&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;Token is invalid&#39;</span>)
</span></span></code></pre></div><h2 id=user-object-in-django>User object in django<a hidden class=anchor aria-hidden=true href=#user-object-in-django>#</a></h2><p>The <code>User</code> object in Django is a built-in model that represents a user account.The inbuilt <code>User</code> model in Django provides the following fields:</p><ul><li>username</li><li>password</li><li>email</li><li>first_name</li><li>last_name</li><li>is_active</li><li>is_staff</li><li>is_superuser</li><li>date_joined</li></ul><blockquote><p><code>staff</code> Are the user who can access the admin interface.</p><blockquote><p><code>superuser</code> Are the user who have all the permissions in the Django application.</p><blockquote><p><code>is_active</code> Are the user who are active in the Django application.Only active user can login to the Django application.This three fields are boolean fields and have default value <code>False</code>.</p></blockquote></blockquote></blockquote><h2 id=creating-a-user>Creating a User<a hidden class=anchor aria-hidden=true href=#creating-a-user>#</a></h2><p>TO create a user you can use <code>create()</code> method of the <code>User</code> model.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>,email<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice@gmail.com&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>set_password(<span style=color:#e6db74>&#39;password&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>save()
</span></span></code></pre></div><blockquote><p>Note: <code>set_password()</code> method is used to set the password of the user in the hashed format.</p></blockquote><blockquote><p>Note: you can use get_user_model() method to get the user model in Django.</p></blockquote><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> get_user_model
</span></span><span style=display:flex><span>User <span style=color:#f92672>=</span> get_user_model()
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>,username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>,email<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice@gmail.com&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>set_password(<span style=color:#e6db74>&#39;password&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>save()
</span></span></code></pre></div><h2 id=authenticating-a-user>Authenticating a User<a hidden class=anchor aria-hidden=true href=#authenticating-a-user>#</a></h2><p>TO learn authentication in django be familiar with the following methods</p><ul><li>request.user : The user object of the currently logged in user.</li><li>request.user.is_authenticated : A boolean value that indicates whether the user is authenticated or not.</li><li>request.user.is_staff : A boolean value that indicates whether the user is a staff member or not.</li><li>request.user.is_superuser : A boolean value that indicates whether the user is a superuser or not.</li></ul><h3 id=authenticate>Authenticate<a hidden class=anchor aria-hidden=true href=#authenticate>#</a></h3><p>To authenticate a user, you can use the <code>authenticate()</code> method from the <code>django.contrib.auth</code> module. This method takes the <code>request</code>, <code>username</code> and <code>password</code> as arguments and returns the user object if the credentials are valid.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> authenticate
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> authenticate(request, username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>, password<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;password&#39;</span>)
</span></span></code></pre></div><h3 id=login>Login<a hidden class=anchor aria-hidden=true href=#login>#</a></h3><p>To login a user, you can use the <code>login()</code> method from the <code>django.contrib.auth</code> module. This method takes the <code>request</code> and the user object as arguments and logs in the user.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> login
</span></span><span style=display:flex><span>login(request, user)
</span></span></code></pre></div><h3 id=logout>Logout<a hidden class=anchor aria-hidden=true href=#logout>#</a></h3><p>To logout a user, you can use the <code>logout()</code> method from the <code>django.contrib.auth</code> module. This method takes the <code>request</code> as an argument and logs out the user.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> logout
</span></span><span style=display:flex><span>logout(request)
</span></span></code></pre></div><h2 id=combination-of-authenticatelogin-and-logout>Combination of authenticate(),login() and logout()<a hidden class=anchor aria-hidden=true href=#combination-of-authenticatelogin-and-logout>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> authenticate, login, logout
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>login_view</span>(request):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> request<span style=color:#f92672>.</span>method <span style=color:#f92672>==</span> <span style=color:#e6db74>&#39;POST&#39;</span>:
</span></span><span style=display:flex><span>        username <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>POST[<span style=color:#e6db74>&#39;username&#39;</span>]
</span></span><span style=display:flex><span>        password <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span>POST[<span style=color:#e6db74>&#39;password&#39;</span>]
</span></span><span style=display:flex><span>        user <span style=color:#f92672>=</span> authenticate(request, username<span style=color:#f92672>=</span>username, password<span style=color:#f92672>=</span>password)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> user <span style=color:#f92672>is</span> <span style=color:#f92672>not</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>            login(request, user)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;User logged in successfully&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;Invalid username or password&#39;</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> render(request, <span style=color:#e6db74>&#39;login.html&#39;</span>)
</span></span></code></pre></div><h2 id=protected-views>Protected Views<a hidden class=anchor aria-hidden=true href=#protected-views>#</a></h2><p>To protect a view so that only authenticated users can access it, you can use the <code>login_required</code> decorator from the <code>django.contrib.auth.decorators</code> module.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.decorators <span style=color:#f92672>import</span> login_required
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@login_required</span>(login_url<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;login&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>protected_view</span>(request):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;This is a protected view&#39;</span>)
</span></span></code></pre></div><blockquote><p>Note: The <code>login_url</code> argument is used to redirect the user to the login page if they are not authenticated and <code>login</code> is name of the login url.</p></blockquote><h2 id=custom-user-model>Custom User Model<a hidden class=anchor aria-hidden=true href=#custom-user-model>#</a></h2><p>Everytime you create a new Django project, Django creates a default User model for you. But sometimes you may want to customize the User model to add additional fields or change the existing fields.So there are two ways to create a custom user model in Django.</p><ul><li>Using Abstract User(Contains all the fields of the default User model and you can add additional fields to it)</li><li>Using Abstract Base User( Contain the authentication fields only and you can add additional fields to it)</li></ul><h3 id=using-abstract-user>Using Abstract User<a hidden class=anchor aria-hidden=true href=#using-abstract-user>#</a></h3><p>You choose this option if you want to add additional fields to the default .You choose this if you want a small change in the default User model.</p><h2 id=process-to-create-a-custom-user-model-using-abstract-user>Process to create a custom user model using Abstract User<a hidden class=anchor aria-hidden=true href=#process-to-create-a-custom-user-model-using-abstract-user>#</a></h2><h3 id=step-1-create-a-new-model-that-inherits-from-abstractuser>Step 1: Create a new model that inherits from AbstractUser<a hidden class=anchor aria-hidden=true href=#step-1-create-a-new-model-that-inherits-from-abstractuser>#</a></h3><p>models.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> AbstractUser
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomUser</span>(AbstractUser):
</span></span><span style=display:flex><span>    age <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>PositiveIntegerField(null<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    address <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>, null<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    phone <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span>, null<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><blockquote><p>Note : There is existing field and age,address,phone are the additional fields that we have added to the User model.</p></blockquote><h3 id=step-2-update-the-auth_user_model-setting-in-settingspy>Step 2: Update the AUTH_USER_MODEL setting in settings.py<a hidden class=anchor aria-hidden=true href=#step-2-update-the-auth_user_model-setting-in-settingspy>#</a></h3><p>settings.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>AUTH_USER_MODEL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;myapp.CustomUser&#39;</span>
</span></span></code></pre></div><blockquote><p>Note: AUTH_USER_MODEL is used to specify which model to use for the user authentication.<code>get_user_model()</code> method is used to get the user model in Django which is specified in the AUTH_USER_MODEL setting.</p></blockquote><h3 id=step-3-create-a-new-migration-and-apply-it>Step 3: Create a new migration and apply it<a hidden class=anchor aria-hidden=true href=#step-3-create-a-new-migration-and-apply-it>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python manage.py makemigrations
</span></span><span style=display:flex><span>python manage.py migrate
</span></span></code></pre></div><h3 id=step-4-create-a-new-user>Step 4: Create a new user<a hidden class=anchor aria-hidden=true href=#step-4-create-a-new-user>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> myapp.models <span style=color:#f92672>import</span> CustomUser
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> CustomUser<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>,email<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice@gmail.com&#39;</span>,age<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>,address<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;New York&#39;</span>,phone<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;1234567890&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>set_password(<span style=color:#e6db74>&#39;password&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>save()
</span></span></code></pre></div><p>or,</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> get_user_model
</span></span><span style=display:flex><span>CustomUser <span style=color:#f92672>=</span> get_user_model()
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> CustomUser<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>,email<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice@gmail.com&#39;</span>,age<span style=color:#f92672>=</span><span style=color:#ae81ff>20</span>,address<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;New York&#39;</span>,phone<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;1234567890&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>set_password(<span style=color:#e6db74>&#39;password&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>save()
</span></span></code></pre></div><h3 id=registering-with-admin-interface>Registering with admin interface<a hidden class=anchor aria-hidden=true href=#registering-with-admin-interface>#</a></h3><p>To make the custom user model available in the admin interface, you need to register it with the admin interface.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib <span style=color:#f92672>import</span> admin
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> myapp.models <span style=color:#f92672>import</span> CustomUser
</span></span><span style=display:flex><span>admin<span style=color:#f92672>.</span>site<span style=color:#f92672>.</span>register(CustomUser)
</span></span></code></pre></div><h3 id=using-abstract-base-user>Using Abstract Base User<a hidden class=anchor aria-hidden=true href=#using-abstract-base-user>#</a></h3><p>In Abstract Base user it contains only the authentication functionality but no actual fields except<code>password</code> and <code>lastlogin</code>.</p><h2 id=process-to-create-a-custom-user-model-using-abstract-base-user>Process to create a custom user model using Abstract Base User<a hidden class=anchor aria-hidden=true href=#process-to-create-a-custom-user-model-using-abstract-base-user>#</a></h2><h3 id=step-1-create-a-new-model-that-inherits-from-abstractbaseuser>Step 1: Create a new model that inherits from AbstractBaseUser<a hidden class=anchor aria-hidden=true href=#step-1-create-a-new-model-that-inherits-from-abstractbaseuser>#</a></h3><p>models.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> AbstractBaseUser, BaseUserManager,PermissionsMixin
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomUser</span>(AbstractBaseUser,PermissionsMixin):
</span></span><span style=display:flex><span>    email <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>EmailField(unique<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    age <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>PositiveIntegerField(null<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    address <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>, null<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    phone <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>15</span>, null<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, blank<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    is_staff <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>BooleanField(default<span style=color:#f92672>=</span><span style=color:#66d9ef>False</span>)
</span></span><span style=display:flex><span>    is_active <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>BooleanField(default<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    objects <span style=color:#f92672>=</span> CustomUserManager()
</span></span><span style=display:flex><span>    USERNAME_FIELD <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;email&#39;</span>
</span></span><span style=display:flex><span>    REQUIRED_FIELDS <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;phone&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> __str__(self):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>email
</span></span></code></pre></div><blockquote><p>Note: <code>USERNAME_FIELD</code> is used to specify the field that is used for authentication and <code>REQUIRED_FIELDS</code> is used to specify the fields that are required when creating a user using the <code>createsuperuser</code> command.</p><blockquote><p>Note: AbstractBaseUser only contains <code>password</code> and <code>lastlogin</code> fields and you need to define the fields that you want to add to the user model.</p><blockquote><p>Note: PermissionMinxing contains the permission fields <code>is_superuser</code>,<code>groups</code> and <code>user_permissions</code> fields.</p></blockquote></blockquote></blockquote><h3 id=step-2-create-a-new-manager-class-that-inherits-from-baseusermanager>Step 2: Create a new manager class that inherits from BaseUserManager<a hidden class=anchor aria-hidden=true href=#step-2-create-a-new-manager-class-that-inherits-from-baseusermanager>#</a></h3><p>BaseUserManager is used to create a user and superuser.Django internally uses this manager to create a user and superuser.</p><p>models.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> BaseUserManager
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomUserManager</span>(BaseUserManager):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_user</span>(self,email,password<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>,<span style=color:#f92672>**</span>extra_fields):
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> email:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>&#39;The Email field must be set&#39;</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#f92672>not</span> password:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>raise</span> <span style=color:#a6e22e>ValueError</span>(<span style=color:#e6db74>&#39;The Password field must be set&#39;</span>)
</span></span><span style=display:flex><span>        email <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>normalize_email(email)
</span></span><span style=display:flex><span>        user <span style=color:#f92672>=</span> self<span style=color:#f92672>.</span>model(email<span style=color:#f92672>=</span>email,<span style=color:#f92672>**</span>extra_fields)
</span></span><span style=display:flex><span>        user<span style=color:#f92672>.</span>set_password(password)
</span></span><span style=display:flex><span>        user<span style=color:#f92672>.</span>save(using<span style=color:#f92672>=</span>self<span style=color:#f92672>.</span>_db)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> user
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create_superuser</span>(self,email,password<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>,<span style=color:#f92672>**</span>extra_fields):
</span></span><span style=display:flex><span>        extra_fields<span style=color:#f92672>.</span>setdefault(<span style=color:#e6db74>&#39;is_staff&#39;</span>,<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        extra_fields<span style=color:#f92672>.</span>setdefault(<span style=color:#e6db74>&#39;is_superuser&#39;</span>,<span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> self<span style=color:#f92672>.</span>create_user(email,password,<span style=color:#f92672>**</span>extra_fields)
</span></span></code></pre></div><h3 id=step-3-update-the-auth_user_model-setting-in-settingspy>Step 3: Update the AUTH_USER_MODEL setting in settings.py<a hidden class=anchor aria-hidden=true href=#step-3-update-the-auth_user_model-setting-in-settingspy>#</a></h3><p>settings.py</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>AUTH_USER_MODEL <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;myapp.CustomUser&#39;</span>
</span></span></code></pre></div><h3 id=step-4-create-a-new-migration-and-apply-it>Step 4: Create a new migration and apply it<a hidden class=anchor aria-hidden=true href=#step-4-create-a-new-migration-and-apply-it>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>python manage.py makemigrations
</span></span><span style=display:flex><span>python manage.py migrate
</span></span></code></pre></div><h3 id=step-5-setting-the-admin-interface-using-useradmin>Step 5: Setting The Admin Interface using UserAdmin<a hidden class=anchor aria-hidden=true href=#step-5-setting-the-admin-interface-using-useradmin>#</a></h3><p>To make the custom user model available in the admin interface, you need to create a new class that inherits from <code>UserAdmin</code> and register it with the admin interface.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib <span style=color:#f92672>import</span> admin
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.admin <span style=color:#f92672>import</span> UserAdmin
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> myapp.models <span style=color:#f92672>import</span> CustomUser
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomUserAdmin</span>(UserAdmin):
</span></span><span style=display:flex><span>    model <span style=color:#f92672>=</span> CustomUser
</span></span><span style=display:flex><span>    fieldsets <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Basic Information&#34;</span>, {<span style=color:#e6db74>&#39;fields&#39;</span>: (<span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#e6db74>&#39;password&#39;</span>)}),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Personal Information&#34;</span>, {<span style=color:#e6db74>&#39;fields&#39;</span>: (<span style=color:#e6db74>&#39;age&#39;</span>, <span style=color:#e6db74>&#39;address&#39;</span>, <span style=color:#e6db74>&#39;phone&#39;</span>)}),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Permissions&#34;</span>, {<span style=color:#e6db74>&#39;fields&#39;</span>: (<span style=color:#e6db74>&#39;is_active&#39;</span>, <span style=color:#e6db74>&#39;is_staff&#39;</span>, <span style=color:#e6db74>&#39;is_superuser&#39;</span>)}),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    add_fieldsets <span style=color:#f92672>=</span> (
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Basic Information&#34;</span>, {<span style=color:#e6db74>&#39;fields&#39;</span>: (<span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#e6db74>&#39;password1&#39;</span>, <span style=color:#e6db74>&#39;password2&#39;</span>)}),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Personal Information&#34;</span>, {<span style=color:#e6db74>&#39;fields&#39;</span>: (<span style=color:#e6db74>&#39;age&#39;</span>, <span style=color:#e6db74>&#39;address&#39;</span>, <span style=color:#e6db74>&#39;phone&#39;</span>)}),
</span></span><span style=display:flex><span>        (<span style=color:#e6db74>&#34;Permissions&#34;</span>, {<span style=color:#e6db74>&#39;fields&#39;</span>: (<span style=color:#e6db74>&#39;is_active&#39;</span>, <span style=color:#e6db74>&#39;is_staff&#39;</span>, <span style=color:#e6db74>&#39;is_superuser&#39;</span>)}),
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>    ordering <span style=color:#f92672>=</span> (<span style=color:#e6db74>&#39;email&#39;</span>,)
</span></span><span style=display:flex><span>    list_display <span style=color:#f92672>=</span> (<span style=color:#e6db74>&#39;email&#39;</span>, <span style=color:#e6db74>&#39;age&#39;</span>, <span style=color:#e6db74>&#39;address&#39;</span>, <span style=color:#e6db74>&#39;phone&#39;</span>, <span style=color:#e6db74>&#39;is_active&#39;</span>, <span style=color:#e6db74>&#39;is_staff&#39;</span>, <span style=color:#e6db74>&#39;is_superuser&#39;</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>admin<span style=color:#f92672>.</span>site<span style=color:#f92672>.</span>register(CustomUser, CustomUserAdmin)
</span></span></code></pre></div><h2 id=custom-authentication-in-django>Custom Authentication In Django<a hidden class=anchor aria-hidden=true href=#custom-authentication-in-django>#</a></h2><p>All the authentication in Django is done using the <code>authenticate()</code> method from the <code>django.contrib.auth</code> module. This method takes the <code>request</code>, <code>username</code> and <code>password</code> as arguments and returns the user object if the credentials are valid.But sometimes you may want to customize the authentication process in Django. You can do this by creating a custom authentication backend.</p><h2 id=process-to-create-a-custom-authentication-backend>Process to create a custom authentication backend<a hidden class=anchor aria-hidden=true href=#process-to-create-a-custom-authentication-backend>#</a></h2><h3 id=step-1-create-a-new-class-that-inherits-from-basebackend>Step 1: Create a new class that inherits from <code>BaseBackend</code><a hidden class=anchor aria-hidden=true href=#step-1-create-a-new-class-that-inherits-from-basebackend>#</a></h3><p>You need to create a new class that inherits from <code>BaseBackend</code> and implement the <code>authenticate()</code> method. This method should take the <code>request</code>, <code>username</code> and <code>password</code> as arguments and return the user object if the credentials are valid.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.backends <span style=color:#f92672>import</span> BaseBackend
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> get_user_model
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>CustomBackend</span>(BaseBackend):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>authenticate</span>(self, request, username<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>, password<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        User <span style=color:#f92672>=</span> get_user_model()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(email<span style=color:#f92672>=</span>username)
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> user<span style=color:#f92672>.</span>check_password(password):
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> user
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> User<span style=color:#f92672>.</span>DoesNotExist:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>None</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get_user</span>(self, user_id):
</span></span><span style=display:flex><span>        User <span style=color:#f92672>=</span> get_user_model()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>try</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(pk<span style=color:#f92672>=</span>user_id)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>except</span> User<span style=color:#f92672>.</span>DoesNotExist:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>None</span>
</span></span></code></pre></div><h3 id=step-2-update-the-authentication_backends-setting-in-settingspy>Step 2: Update the AUTHENTICATION_BACKENDS setting in settings.py<a hidden class=anchor aria-hidden=true href=#step-2-update-the-authentication_backends-setting-in-settingspy>#</a></h3><p>You need to update the <code>AUTHENTICATION_BACKENDS</code> setting in the <code>settings.py</code> file to include the path to the custom authentication backend.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>AUTHENTICATION_BACKENDS <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;myapp.backends.CustomBackend&#39;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;django.contrib.auth.backends.ModelBackend&#39;</span>,
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><h3 id=step-3-authenticate-the-user-using-the-custom-authentication-backend>Step 3: Authenticate the user using the custom authentication backend<a hidden class=anchor aria-hidden=true href=#step-3-authenticate-the-user-using-the-custom-authentication-backend>#</a></h3><p>You can now authenticate the user using the custom authentication backend by calling the <code>authenticate()</code> method from the <code>django.contrib.auth</code> module.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> authenticate
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> authenticate(request,usernmae<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>,password<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;password&#39;</span>)
</span></span></code></pre></div><h2 id=groups-in-django>Groups in Django<a hidden class=anchor aria-hidden=true href=#groups-in-django>#</a></h2><p>Groups in Django are a way to categorize users into different groups based on their roles or permissions. Each group can have multiple permissions, and each user can belong to multiple groups. Groups are useful for managing permissions and access control in Django applications.</p><h3 id=creating-a-group>Creating a Group<a hidden class=anchor aria-hidden=true href=#creating-a-group>#</a></h3><p>To create a group, you can use the <code>Group</code> model from the <code>django.contrib.auth.models</code> module. You can create an instance of this model and call the <code>save()</code> method to save the group to the database.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Group
</span></span><span style=display:flex><span>group <span style=color:#f92672>=</span> Group(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span><span style=display:flex><span>group<span style=color:#f92672>.</span>save()
</span></span></code></pre></div><h3 id=get-group-by-name>Get Group By Name<a hidden class=anchor aria-hidden=true href=#get-group-by-name>#</a></h3><p>To get a group by name, you can use the <code>get()</code> method of the <code>Group</code> model. This method takes the <code>name</code> of the group as an argument and returns the group object if it exists.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Group
</span></span><span style=display:flex><span>group <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span></code></pre></div><h3 id=adding-user-to-group>Adding User TO Group<a hidden class=anchor aria-hidden=true href=#adding-user-to-group>#</a></h3><p>To add a user to a group, you can use the <code>user.groups.add()</code> method. This method takes the group object as an argument and adds the user to the group.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User, Group
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>group1 <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span><span style=display:flex><span>group2 <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Editors&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>groups<span style=color:#f92672>.</span>add(group1, group2)
</span></span></code></pre></div><h3 id=removing-user-from-group>Removing User From Group<a hidden class=anchor aria-hidden=true href=#removing-user-from-group>#</a></h3><p>To remove a user from a group, you can use the <code>user.groups.remove()</code> method. This method takes the group object as an argument and removes the user from the group.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User, Group
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>group1 <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span><span style=display:flex><span>group2 <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Editors&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>groups<span style=color:#f92672>.</span>remove(group1, group2)
</span></span></code></pre></div><h3 id=clear-all-the-groups>Clear All The Groups<a hidden class=anchor aria-hidden=true href=#clear-all-the-groups>#</a></h3><p>To remove all the groups from a user, you can use the <code>user.groups.clear()</code> method. This method removes all the groups from the user.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>groups<span style=color:#f92672>.</span>clear()
</span></span></code></pre></div><h3 id=get-all-the-groups-of-a-user>Get All The Groups Of A User<a hidden class=anchor aria-hidden=true href=#get-all-the-groups-of-a-user>#</a></h3><p>To get all the groups of a user, you can use the <code>user.groups.all()</code> method. This method returns all the groups that the user belongs to.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>groups <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span>groups<span style=color:#f92672>.</span>all()
</span></span></code></pre></div><h2 id=permissions-in-django>Permissions in Django<a hidden class=anchor aria-hidden=true href=#permissions-in-django>#</a></h2><p>Permission is given to user so that they can perform certain actions in the Django application from the admin interface.</p><h3 id=default-permissions>Default Permissions<a hidden class=anchor aria-hidden=true href=#default-permissions>#</a></h3><p>Django provides the following default permissions:</p><ul><li>add_modelname: Allows the user to add new objects of the model.</li><li>change_modelname: Allows the user to change existing objects of the model.</li><li>delete_modelname: Allows the user to delete objects of the model.</li><li>view_modelname: Allows the user to view objects of the model.</li></ul><h3 id=custom-permissions>Custom Permissions<a hidden class=anchor aria-hidden=true href=#custom-permissions>#</a></h3><p>Every time the default permissions are not sufficient for the application, you can create custom permissions using the <code>Permission</code> model from the <code>django.contrib.auth.models</code> or by using the <code>Meta</code> class in the model.</p><h4 id=using-meta-class>Using Meta Class<a hidden class=anchor aria-hidden=true href=#using-meta-class>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>MyModelName</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    <span style=color:#75715e># code</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        permissions <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>            (<span style=color:#e6db74>&#39;have_special&#39;</span>, <span style=color:#e6db74>&#39;Have Special Feature&#39;</span>),
</span></span><span style=display:flex><span>        ]
</span></span></code></pre></div><h4 id=using-code>Using Code<a hidden class=anchor aria-hidden=true href=#using-code>#</a></h4><h5 id=creating-a-permission>Creating a Permission<a hidden class=anchor aria-hidden=true href=#creating-a-permission>#</a></h5><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Permission
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.contenttypes.models <span style=color:#f92672>import</span> ContentType
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>content_type <span style=color:#f92672>=</span> ContentType<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get_for_model(MyModelName)
</span></span><span style=display:flex><span>permission <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(
</span></span><span style=display:flex><span>    codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>,
</span></span><span style=display:flex><span>    name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Have Special Feature&#39;</span>,
</span></span><span style=display:flex><span>    content_type<span style=color:#f92672>=</span>content_type,
</span></span><span style=display:flex><span>)
</span></span></code></pre></div><h3 id=some-useful-methods-of-permission>Some Useful Methods of Permission<a hidden class=anchor aria-hidden=true href=#some-useful-methods-of-permission>#</a></h3><h4 id=get-permission-object-using-codename><code>Get Permission object using codename</code><a hidden class=anchor aria-hidden=true href=#get-permission-object-using-codename>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Permission
</span></span><span style=display:flex><span>permission <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>)
</span></span></code></pre></div><h4 id=delete-permission><code>Delete Permission</code><a hidden class=anchor aria-hidden=true href=#delete-permission>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Permission
</span></span><span style=display:flex><span>permission <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>)
</span></span><span style=display:flex><span>permission<span style=color:#f92672>.</span>delete()
</span></span></code></pre></div><h4 id=assigning-permission-to-user>Assigning Permission to User<a hidden class=anchor aria-hidden=true href=#assigning-permission-to-user>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User, Permission
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> myapp.models <span style=color:#f92672>import</span> User
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>permission1 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>)
</span></span><span style=display:flex><span>permission2 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;add_mymodelname&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>user_permissions<span style=color:#f92672>.</span>add(permission1, permission2)
</span></span></code></pre></div><h4 id=removing-permission-from-user>Removing Permission from User<a hidden class=anchor aria-hidden=true href=#removing-permission-from-user>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User, Permission
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>permission1 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>)
</span></span><span style=display:flex><span>permission2 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;add_mymodelname&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>user_permissions<span style=color:#f92672>.</span>remove(permission1, permission2)
</span></span></code></pre></div><h4 id=clear-all-the-permissions>Clear All The Permissions<a hidden class=anchor aria-hidden=true href=#clear-all-the-permissions>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>user<span style=color:#f92672>.</span>user_permissions<span style=color:#f92672>.</span>clear()
</span></span></code></pre></div><h4 id=see-all-the-permissions-of-a-user>See All The Permissions Of A User<a hidden class=anchor aria-hidden=true href=#see-all-the-permissions-of-a-user>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> User
</span></span><span style=display:flex><span>user <span style=color:#f92672>=</span> User<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(username<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;alice&#39;</span>)
</span></span><span style=display:flex><span>permissions <span style=color:#f92672>=</span> user<span style=color:#f92672>.</span>user_permissions<span style=color:#f92672>.</span>all()
</span></span></code></pre></div><h3 id=assigning-permission-to-group>Assigning Permission to Group<a hidden class=anchor aria-hidden=true href=#assigning-permission-to-group>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Group, Permission
</span></span><span style=display:flex><span>group <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span><span style=display:flex><span>permission1 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>)
</span></span><span style=display:flex><span>permission2 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;add_mymodelname&#39;</span>)
</span></span><span style=display:flex><span>group<span style=color:#f92672>.</span>permissions<span style=color:#f92672>.</span>add(permission1, permission2)
</span></span></code></pre></div><h3 id=removing-permission-from-group>Removing Permission from Group<a hidden class=anchor aria-hidden=true href=#removing-permission-from-group>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Group, Permission
</span></span><span style=display:flex><span>group <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span><span style=display:flex><span>permission1 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;have_special&#39;</span>)
</span></span><span style=display:flex><span>permission2 <span style=color:#f92672>=</span> Permission<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(codename<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;add_mymodelname&#39;</span>)
</span></span><span style=display:flex><span>group<span style=color:#f92672>.</span>permissions<span style=color:#f92672>.</span>remove(permission1, permission2)
</span></span></code></pre></div><h3 id=see-all-the-permissions-of-a-group>See All The Permissions Of A Group<a hidden class=anchor aria-hidden=true href=#see-all-the-permissions-of-a-group>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.models <span style=color:#f92672>import</span> Group
</span></span><span style=display:flex><span>group <span style=color:#f92672>=</span> Group<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;Admins&#39;</span>)
</span></span><span style=display:flex><span>permissions <span style=color:#f92672>=</span> group<span style=color:#f92672>.</span>permissions<span style=color:#f92672>.</span>all()
</span></span></code></pre></div><h3 id=check-whether-the-user-has-permission>Check whether the user has permission<a hidden class=anchor aria-hidden=true href=#check-whether-the-user-has-permission>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>user<span style=color:#f92672>.</span>has_perm(<span style=color:#e6db74>&#39;myapp.have_special&#39;</span>)
</span></span></code></pre></div><h3 id=restricting-access-to-views>Restricting Access to Views<a hidden class=anchor aria-hidden=true href=#restricting-access-to-views>#</a></h3><p>To restrict access to a view based on permissions, you can use the <code>permission_required</code> decorator from the <code>django.contrib.auth.decorators</code> module.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth.decorators <span style=color:#f92672>import</span> permission_required
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>@permission_required</span>(<span style=color:#e6db74>&#39;myapp.have_special&#39;</span>)
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>special_view</span>(request):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> HttpResponse(<span style=color:#e6db74>&#39;This is a special view&#39;</span>)
</span></span></code></pre></div><h1 id=this-will-be-enough-to-learn-drf-i-hope-you-enjoyed-this-series-if-you-have-any-questions-or-suggestions-feel-free-to-ask-thank-you-for-reading-happy-coding>This will be enough to learn DRF. I hope you enjoyed this series. If you have any questions or suggestions, feel free to ask. Thank you for reading. Happy coding!🚀🚀🚀<a hidden class=anchor aria-hidden=true href=#this-will-be-enough-to-learn-drf-i-hope-you-enjoyed-this-series-if-you-have-any-questions-or-suggestions-feel-free-to-ask-thank-you-for-reading-happy-coding>#</a></h1></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/django/>Django</a></li><li><a href=http://localhost:1313/tags/python/>Python</a></li><li><a href=http://localhost:1313/tags/email/>Email</a></li><li><a href=http://localhost:1313/tags/middleware/>Middleware</a></li><li><a href=http://localhost:1313/tags/token/>Token</a></li><li><a href=http://localhost:1313/tags/user-management/>User Management</a></li><li><a href=http://localhost:1313/tags/backend/>Backend</a></li><li><a href=http://localhost:1313/tags/web-development/>Web Development</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/pages/django/django-10/><span class=title>« Prev</span><br><span>Django : Day 10</span>
</a><a class=next href=http://localhost:1313/posts/pages/django/django-8/><span class=title>Next »</span><br><span>Django : Day 8</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on x" href="https://x.com/intent/tweet/?text=Django%20%3a%20Day%209&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f&amp;hashtags=Django%2cPython%2cEmail%2cMiddleware%2cToken%2cUserManagement%2cBackend%2cWebDevelopment"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f&amp;title=Django%20%3a%20Day%209&amp;summary=Django%20%3a%20Day%209&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f&title=Django%20%3a%20Day%209"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on whatsapp" href="https://api.whatsapp.com/send?text=Django%20%3a%20Day%209%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on telegram" href="https://telegram.me/share/url?text=Django%20%3a%20Day%209&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share Django : Day 9 on ycombinator" href="https://news.ycombinator.com/submitlink?t=Django%20%3a%20Day%209&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdjango%2fdjango-9%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Quick Reference</a></span> ·</footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>