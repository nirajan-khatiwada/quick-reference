<!doctype html><html lang=en dir=auto><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>DRF : Day 3 | Quick Reference</title>
<meta name=keywords content="Django,Python,DRF,JWT,Authentication,Backend,Web Development"><meta name=description content="Learn how to implement JWT authentication in Django REST framework, including installation, configuration, and usage."><meta name=author content="Nirajan Khatiwada"><link rel=canonical href=http://localhost:1313/posts/pages/drf/drf3/><link crossorigin=anonymous href=/assets/css/stylesheet.f49d66caae9ea0fd43f21f29e71a8d3e284517ed770f2aa86fa012953ad3c9ef.css integrity="sha256-9J1myq6eoP1D8h8p5xqNPihFF+13Dyqob6ASlTrTye8=" rel="preload stylesheet" as=style><link rel=icon href=http://localhost:1313/images/icon.png><link rel=icon type=image/png sizes=16x16 href=http://localhost:1313/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=http://localhost:1313/favicon-32x32.png><link rel=apple-touch-icon href=http://localhost:1313/apple-touch-icon.png><link rel=mask-icon href=http://localhost:1313/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=http://localhost:1313/posts/pages/drf/drf3/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:url" content="http://localhost:1313/posts/pages/drf/drf3/"><meta property="og:site_name" content="Quick Reference"><meta property="og:title" content="DRF : Day 3"><meta property="og:description" content="Learn how to implement JWT authentication in Django REST framework, including installation, configuration, and usage."><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2025-01-14T00:00:00+00:00"><meta property="article:modified_time" content="2025-01-14T00:00:00+00:00"><meta property="article:tag" content="Django"><meta property="article:tag" content="Python"><meta property="article:tag" content="DRF"><meta property="article:tag" content="JWT"><meta property="article:tag" content="Authentication"><meta property="article:tag" content="Backend"><meta property="og:image" content="http://localhost:1313/images/drf.png"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://localhost:1313/images/drf.png"><meta name=twitter:title content="DRF : Day 3"><meta name=twitter:description content="Learn how to implement JWT authentication in Django REST framework, including installation, configuration, and usage."><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Posts","item":"http://localhost:1313/posts/"},{"@type":"ListItem","position":2,"name":"DRF : Day 3","item":"http://localhost:1313/posts/pages/drf/drf3/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"DRF : Day 3","name":"DRF : Day 3","description":"Learn how to implement JWT authentication in Django REST framework, including installation, configuration, and usage.","keywords":["Django","Python","DRF","JWT","Authentication","Backend","Web Development"],"articleBody":"Serializer Relationships Relational fields are used to represent model relationships. They can be applied to ForeignKey, ManyToManyField and OneToOneField relationships, as well as to reverse relationships\nConsider the following models:\nfrom django.db import models class Author(models.Model): name = models.CharField(max_length=100) class Book(models.Model): title = models.CharField(max_length=100) author = models.ForeignKey(Author, on_delete=models.CASCADE) Primary Key Related Field A primary key related field should present either the queryset or read_only attributed to true.Normally ModelSerializer uses the primary key related field to represent the relationship.PrimaryKeyRelatedField may be used to represent the target of the relationship using its primary key.\nfor example:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.ModelSerializer): class Meta: model = Book fields = ['title', 'author'] from rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.Serializer): title = serializers.CharField(max_length=100) author = serializers.PrimaryKeyRelatedField(queryset=Author.objects.all()) Will serialize like this:\n{ \"title\": \"The Great Gatsby\", \"author\": 1 } Saving and Updating Instance of Primary Key Related Field One To One Relationship Request format: { \"title\": \"The Great Gatsby\", \"author\": 1 } Model Serializer:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.ModelSerializer): class Meta: model = Book fields = ['title', 'author'] Normal Serializer:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.Serializer): title = serializers.CharField(max_length=100) author = serializers.PrimaryKeyRelatedField(queryset=Author.objects.all()) def create(self, validated_data): author = validated_data.pop('author') author_instance = Author.objects.get(id=author) return Book.objects.create(author=author_instance, **validated_data) def update(self, instance, validated_data): author = validated_data.pop('author') author_instance = Author.objects.get(id=author) instance.author = author_instance instance.title = validated_data.get('title', instance.title) instance.save() return instance Using it in API view to update and save the instance and get the instance:\nfrom rest_framework import APIView from rest_framework.response import Response from .models import Author, Book from .serializers import BookSerializer class BookView(APIView): def post(self, request): serializer = BookSerializer(data=request.data) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) def get(self, request): book = Book.objects.get(id=1) serializer = BookSerializer(book) return Response(serializer.data) def patch(self,request,id): book = Book.objects.get(id=id) serializer = BookSerializer(book, data=request.data, partial=True) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) Foreign Key Relationship Request format:\n{ \"title\": \"The Great Gatsby\", \"author\": 1 } Model Serializer:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.ModelSerializer): class Meta: model = Book fields = ['title', 'author'] Normal Serializer:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.Serializer): title = serializers.CharField(max_length=100) author = serializers.PrimaryKeyRelatedField(queryset=Author.objects.all()) def create(self, validated_data): author = validated_data.pop('author') author_instance = Author.objects.get(id=author) return Book.objects.create(author=author_instance, **validated_data) def update(self, instance, validated_data): author = validated_data.pop('author') author_instance = Author.objects.get(id=author) instance.author = author_instance instance.title = validated_data.get('title', instance.title) instance.save() return instance Using it in API view to update and save the instance and get the instance:\nfrom rest_framework import APIView from rest_framework.response import Response from .models import Author, Book from .serializers import BookSerializer class BookView(APIView): def post(self, request): serializer = BookSerializer(data=request.data) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) def get(self, request): book = Book.objects.get(id=1) serializer = BookSerializer(book) return Response(serializer.data) def patch(self,request,id): book = Book.objects.get(id=id) serializer = BookSerializer(book, data=request.data, partial=True) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) Many To Many Relationship Request format:\n{ \"title\": \"The Great Gatsby\", \"author\": [1, 2] } Model Serializer:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.ModelSerializer): class Meta: model = Book fields = ['title', 'author'] Normal Serializer:\nfrom rest_framework import serializers from .models import Author, Book class BookSerializer(serializers.Serializer): title = serializers.CharField(max_length=100) author = serializers.PrimaryKeyRelatedField(queryset=Author.objects.all(), many=True) def create(self, validated_data): authors = validated_data.pop('author') book = Book.objects.create(**validated_data) author_instances = Author.objects.filter(id__in=authors) book.author.add(*author_instances) return book def update(self, instance, validated_data): authors = validated_data.pop('author') book = instance book.title = validated_data.get('title', book.title) book.save() author_instances = Author.objects.filter(id__in=authors) book.author.set(author_instances) return book Using it in API view to update and save the instance and get the instance:\nfrom rest_framework import APIView from rest_framework.response import Response from .models import Author, Book from .serializers import BookSerializer class BookView(APIView): def post(self, request): serializer = BookSerializer(data=request.data) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) def get(self, request): book = Book.objects.get(id=1) serializer = BookSerializer(book) return Response(serializer.data) def patch(self,request,id): book = Book.objects.get(id=id) serializer = BookSerializer(book, data=request.data, partial=True) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) Nested Relationships As opposed to previously discussed references to another entity, the referred entity can instead also be embedded or nested in the representation of the object that refers to it. Such nested relationships can be expressed by using serializers as fields.\nIf the field is used to represent a to-many relationship, you should add the many=True flag to the serializer field.\nExample:\nModel:\nfrom django.db import models class Author(models.Model): name = models.CharField(max_length=100) class Book(models.Model): title = models.CharField(max_length=100) author = models.ManyToManyField(Author,releted_name='books') Model Serializer:\nfrom rest_framework import serializers from .models import Author, Book class AuthorSerializer(serializers.ModelSerializer): class Meta: model = Author fields = ['id','name'] class BookSerializer(serializers.ModelSerializer): author = AuthorSerializer(many=True) class Meta: model = Book fields = ['title', 'author'] Normal Serializer:\nfrom rest_framework import serializers from .models import Author, Book class AuthorSerializer(serializers.Serializer): id = serializers.IntegerField() name = serializers.CharField(max_length=100) class BookSerializer(serializers.Serializer): title = serializers.CharField(max_length=100) author = AuthorSerializer(many=True) def create(self, validated_data): authors = validated_data.pop('author') book = Book.objects.create(**validated_data) for author in authors: author_instance = Author.objects.get(id=author['id']) book.author.add(author_instance) return book def update(self, instance, validated_data): authors = validated_data.pop('author') book = instance book.title = validated_data.get('title', book.title) book.save() for author in authors: author_instance = Author.objects.get(id=author['id']) book.author.add(author_instance) return book Would serialize to a nested representation like this:\n{ \"title\": \"The Great Gatsby\", \"author\": [ { \"title\": \"F. Scott Fitzgerald\", \"author\": 1 }, { \"title\": \"Ernest Hemingway\", \"author\": 2 } ] } Writable Nested Representations By default nested serializers are read-only. If you want to support write-operations to a nested serializer field you’ll need to create create() and/or update() methods in order to explicitly specify how the child relationships should be saved.\nNote: Model Serializer by default usages the primary key related field to represent the relationship such that we need not define the create() and update() methods but in case of nested serializer we need to define the create() and update() methods.\nModel Serializer: from rest_framework import serializers from .models import Author, Book class AuthorSerializer(serializers.ModelSerializer): class Meta: model = Author fields = ['id', 'name'] class BookSerializer(serializers.ModelSerializer): author = AuthorSerializer(many=True) class Meta: model = Book fields = ['title', 'author'] def create(self, validated_data): authors = validated_data.pop('author') book = Book.objects.create(**validated_data) for author in authors: author_instance = Author.objects.get(id=author['id']) book.author.add(author_instance) return book def update(self, instance, validated_data): authors = validated_data.pop('author') book = instance book.title = validated_data.get('title', book.title) book.save() for author in authors: author_instance = Author.objects.get(id=author['id']) book.author.add(author_instance) return book Normal Serializer: from rest_framework import serializers from .models import Author, Book class AuthorSerializer(serializers.Serializer): id = serializers.IntegerField() name = serializers.CharField(max_length=100) class BookSerializer(serializers.Serializer): title = serializers.CharField(max_length=100) author = AuthorSerializer(many=True) def create(self, validated_data): authors = validated_data.pop('author') book = Book.objects.create(**validated_data) for author in authors: author_instance = Author.objects.get(id=author['id']) book.author.add(author_instance) return book def update(self, instance, validated_data): authors = validated_data.pop('author') book = instance book.title = validated_data.get('title', book.title) book.save() for author in authors: author_instance = Author.objects.get(id=author['id']) book.author.add(author_instance) return book Using it in API view to update and save the instance and get the instance:\nfrom rest_framework import APIView from rest_framework.response import Response from .models import Author, Book from .serializers import BookSerializer class BookView(APIView): def post(self, request): serializer = BookSerializer(data=request.data) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) def get(self, request): book = Book.objects.get(id=1) serializer = BookSerializer(book) return Response(serializer.data) def patch(self,request,id): book = Book.objects.get(id=id) serializer = BookSerializer(book, data=request.data, partial=True) if serializer.is_valid(): serializer.save() return Response(serializer.data) return Response(serializer.errors) Further Notes: Queryset attribute: In version 2.x a serializer class could sometimes automatically determine the queryset argument if a ModelSerializer class was being used.This behavior is now replaced with always using an explicit queryset argument for writable relational fields. Reverse Relations Note that reverse relationships are not automatically included by the ModelSerializer class. You’ll need to add an explicit field for the reverse relationship.for example:\nusing model serializer:\nfrom rest_framework import serializers from .models import Author, Book class AuthorSerializer(serializers.ModelSerializer): books = serializers.PrimaryKeyRelatedField(many=True, read_only=True) class Meta: model = Author fields = ['id', 'name', 'books'] using normal serializer:\nfrom rest_framework import serializers from .models import Author, Book class AuthorSerializer(serializers.Serializer): id = serializers.IntegerField() name = serializers.CharField(max_length=100) books = serializers.PrimaryKeyRelatedField(many=True, read_only=True) You’ll normally want to ensure that you’ve set an appropriate related_name argument on the relationship, that you can use as the field name. For example:\nclass Author(models.Model): name = models.CharField(max_length=100) class Book(models.Model): title = models.CharField(max_length=100) author = models.ForeignKey(Author, related_name='books', on_delete=models.CASCADE) API view like this:\nfrom rest_framework import APIView from rest_framework.response import Response from .models import Author, Book from .serializers import AuthorSerializer class AuthorView(APIView): def get(self, request): author = Author.objects.get(id=1) serializer = AuthorSerializer(author) return Response(serializer.data) Now the AuthorSerializer will include a field named books that represents the reverse relationship.like this:\nAPI Response:\n{ \"id\": 1, \"name\": \"F. Scott Fitzgerald\", \"books\": [ 1, 2 ] } Authentications Authentication is the process of verifying the identity of a user. Authentication always runs at the very start of the view, before the permission and throttling checks occur, and before any other code is allowed to proceed.\nThe request.user property will typically be set to an instance of the contrib.auth package’s User class.\nThe request.auth property is used for any additional authentication information, for example, it may be used to represent an authentication token that the request was signed with.\nNote: Don’t forget that authentication by itself won’t allow or disallow an incoming request, it simply identifies the credentials that the request was made with.The permission class then decides if the request should be authorized or not.\nHow Authentication is determined The authentication schemes are always defined as a list of classes. REST framework will attempt to authenticate with each class in the list, and will set request.user and request.auth using the return value of the first class that successfully authenticates.If no class authenticates, request.user will be set to an instance of django.contrib.auth.models.AnonymousUser, and request.auth will be set to None\nSetting the authentication scheme The default authentication schemes may be set globally, using the DEFAULT_AUTHENTICATION_CLASSES setting. For example.\nREST_FRAMEWORK = { 'DEFAULT_AUTHENTICATION_CLASSES': [ 'rest_framework.authentication.BasicAuthentication', 'rest_framework.authentication.SessionAuthentication', ] } You can also set the authentication scheme on a per-view or per-viewset basis, using the APIView class-based views.\nfrom rest_framework.authentication import SessionAuthentication, BasicAuthentication from rest_framework.permissions import IsAuthenticated from rest_framework.response import Response from rest_framework.views import APIView class ExampleView(APIView): authentication_classes = [SessionAuthentication, BasicAuthentication] permission_classes = [IsAuthenticated] def get(self, request, format=None): content = { 'user': str(request.user), # `django.contrib.auth.User` instance. 'auth': str(request.auth), # None } return Response(content) Insted of using Token,session and basic authentication we can also use custom authentication.\nJWT Authentication In this section, we will learn how to implement JWT authentication in Django REST framework.\nWhat is JWT? JSON Web Token is a fairly new standard which can be used for token-based authentication. Unlike the built-in TokenAuthentication scheme, JWT Authentication doesn’t need to use a database to validate a token because it is self-validated. This means that the server doesn’t need to query the database to check if the token is valid.\nHow JWT works? When a user logs in, the server will generate a token and send it to the client. The client will store the token and send it with every request. The server will then validate the token and allow the user to access protected resources.\nInstalling JWT To install JWT, you need to install the djangorestframework_simplejwt package. You can install it using pip:\npip install djangorestframework-simplejwt Project Configuration Then, your django project must be configured to use the library. In settings.py, add rest_framework_simplejwt.authentication.JWTAuthentication to the list of authentication classes:\nThis set default authentication to JWTAuthentication globally.\nREST_FRAMEWORK = { 'DEFAULT_AUTHENTICATION_CLASSES': [ 'rest_framework_simplejwt.authentication.JWTAuthentication', #other authentication classes ], } but you can also set it on a per-view basis.\nfrom rest_framework_simplejwt.authentication import JWTAuthentication from rest_framework.permissions import IsAuthenticated from rest_framework.response import Response from rest_framework.views import APIView class ExampleView(APIView): authentication_classes = [JWTAuthentication] permission_classes = [IsAuthenticated] def get(self, request, format=None): content = { 'user': str(request.user), # `django.contrib.auth.User` instance. 'auth': str(request.auth), # None } return Response(content) Note view level authentication will have more priority than global authentication. In every request authentication will be check if authentication is set either in view or globally.and authentication winot restrict the request but it will only identify the user so we have to use permission classes to restrict the request.\nGenerating Tokens To generate a token, you can use the TokenObtainPairView view. This view will generate a token for a user. You can use this token to authenticate the user in subsequent requests.\nfrom rest_framework_simplejwt.views import TokenObtainPairView urlpatterns = [ path('api/token/', TokenObtainPairView.as_view(), name='token_obtain_pair'), ] The request on /api/token/ will return a response like this:\n{ \"username\": \"admin\", \"password\": \"admin\" } will return a response like this:\n{ \"access\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z\", \"refresh\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z\" } The refresh token is used to get a new access token when the access token expires.The ascess token is send in every request where authentication class determines which user is making the request while permission class determines whether the user is allowed to make the request or not.if not allowed then it will return 403 forbidden.\nProblem In it: TokenObtainPairView will always user username and password to generate the token but in some cases we need to use email and password to generate the token so we can create our own view to generate the token.so if we have custom user model and authentication then we can create our own view to generate the token.\nfrom rest_framework_simplejwt.tokens import RefreshToken from django.contrib.auth import authenticate from rest_framework.views import APIView from rest_framework.response import Response from rest_framework import serializers class TokenSerializer(serializer.Serializer): email = serializers.EmailField() password = serializers.CharField(max_length=100) class GetToken(APIView): def post(self, request): credentials = TokenSerializer(data=request.data) if(credentials.is_valid()): user = authenticate(email=credentials.validated_data['email'], password=credentials.validated_data['password']) if user is not None: refresh = RefreshToken.for_user(user) return Response({ 'refresh': str(refresh), 'access': str(refresh.access_token) }) else: return Response({ 'error': 'Invalid Credentials' }) else: return Response({ 'error': 'Invalid Data' }) Using Refresh Token If the ascess token is expired then we can use the refresh token to get the new access token.\nfrom rest_framework_simplejwt.views import TokenRefreshView urlpatterns = [ path('api/token/refresh/', TokenRefreshView.as_view(), name='token_refresh'), ] { \"refresh\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z\" } The request on /api/token/refresh/ will return a response like this:\n{ \"access\": \"eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z\" } ```bash ## Verifying Tokens To verify a token, you can use the `TokenVerifyView` view. This view will verify a token and return a response. ```python from rest_framework_simplejwt.views import TokenVerifyView urlpatterns = [ path('api/token/verify/', TokenVerifyView.as_view(), name='token_verify'), ] ```bash ## Backlisting the token First add the blacklist app to your installed apps: ```python INSTALLED_APPS = [ ... 'rest_framework_simplejwt.token_blacklist', ] ```bash Then run python manage.py migrate to create the necessary database tables. Then to backlist token you can use .blacklist() method of the token object. ```python from rest_framework_simplejwt.views import APIView from rest_framework.response import Response from rest_framework_simplejwt.tokens import RefreshToken class LogoutView(APIView): def post(self, request): try: refresh_token = request.data.get['refresh'] token = RefreshToken(refresh_token) token.blacklist() return Response({'message': 'Token blacklisted'}) except Exception as e: return Response({'error': str(e)}) ```bash else you can use the `TokenBlacklistView` view to blacklist the token. ```python from rest_framework_simplejwt.views import TokenBlacklistView urlpatterns = [ path('api/token/blacklist/', TokenBlacklistView.as_view(), name='token_blacklist'), # Add any other urlpatterns here if needed ] ```bash This is specifically for blacklisting the token. when the same token won't be used again.and used to logout the user. ## How to send token in request for authentication and authorization suppose the route `/api/shop` is protected by authentication and authorization then we have to send the token in the request header. ```python Authorization : Bearer json { \"name\": \"book\", \"price\": 100 } ```bash ## Some Expiration settings ```python SIMPLE_JWT = {\"ACCESS_TOKEN_LIFETIME\": timedelta(minutes=5), \"REFRESH_TOKEN_LIFETIME\": timedelta(days=1), } ```bash This will set the access token lifetime to 5 minutes and the refresh token lifetime to 1 day. ## Sending the important data using jwt in drf Normally for obtaining a token in Django Rest Framework, you would use the `TokenObtainPairView` from the `rest_framework_simplejwt` package. Below is an example of how to set up the URL configuration for obtaining a JWT token. ```python from rest_framework_simplejwt.serializers import TokenObtainPairSerializer url_patterns = [ path('api/token/', TokenObtainPairView.as_view(), name='token_obtain_pair'), ] ```bash This will allow you to obtain a JWT token by sending a POST request to `/api/token/` with the user's credentials (username and password). ```json { \"username\": \"your_username\", \"password\": \"your_password\" } ```bash ```json { \"refresh\": \"your_refresh_token\", \"access\": \"your_access_token\" } ```bash when you decode the JWT token, you get the following data: ```json { \"user_id\": 1, \"username\": \"your_username\", \"exp\": 1700000000, \"iat\": 1700000000 } ```bash If you want to send additional data in the JWT token, do like this: ```python #import refresh tokem from rest_framework_simplejwt.token import RefreshToken from rest_framework.views import APIView class TokenView(APIView): def post(self, request): username = request.data.get('username') password = request.data.get('password') #Note you can use serializers to validate the request data user = authenticate(username=username, password=password) if user is not None: refresh = RefreshToken.for_user(user) # Add custom claims refresh['role'] = user.username.role return Response({ 'refresh': str(refresh), 'access': str(refresh.access_token), }) return Response({'error': 'Invalid credentials'}, status=400) ```bash This will add the `user_id` and `username` to the JWT token, which can be accessed when decoding the token. ```json { \"username\": \"your_username\", \"password\": \"your_password\" } ```bash will return: ```json { \"refresh\": \"your_refresh_token\", \"access\": \"your_access_token\" } ```bash And when you decode the JWT token, you will get: ```json { \"user_id\": 1, \"username\": \"your_username\", \"exp\": 1700000000, \"iat\": 1700000000, \"role\": \"your_user_role\" } ```bash ","wordCount":"2775","inLanguage":"en","image":"http://localhost:1313/images/drf.png","datePublished":"2025-01-14T00:00:00Z","dateModified":"2025-01-14T00:00:00Z","author":{"@type":"Person","name":"Nirajan Khatiwada"},"mainEntityOfPage":{"@type":"WebPage","@id":"http://localhost:1313/posts/pages/drf/drf3/"},"publisher":{"@type":"Organization","name":"Quick Reference","logo":{"@type":"ImageObject","url":"http://localhost:1313/images/icon.png"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=http://localhost:1313/ accesskey=h title="Quick Reference (Alt + H)">Quick Reference</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme"><svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=http://localhost:1313/categories/ title=Categories><span>Categories</span></a></li><li><a href=http://localhost:1313/tags/ title=Tags><span>Tags</span></a></li><li><a href=http://localhost:1313/search title="Search (Alt + /)" accesskey=/><span>Search</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=http://localhost:1313/>Home</a>&nbsp;»&nbsp;<a href=http://localhost:1313/posts/>Posts</a></div><h1 class="post-title entry-hint-parent">DRF : Day 3</h1><div class=post-description>Learn how to implement JWT authentication in Django REST framework, including installation, configuration, and usage.</div><div class=post-meta><span title='2025-01-14 00:00:00 +0000 UTC'>January 14, 2025</span>&nbsp;·&nbsp;14 min&nbsp;·&nbsp;2775 words&nbsp;·&nbsp;Nirajan Khatiwada&nbsp;|&nbsp;<a href=https://github.com/nirajan-khatiwada/quick-reference/tree/main/content/posts/pages/drf/drf3.md rel="noopener noreferrer" target=_blank>Suggest Changes</a></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#queryset-attribute>Queryset attribute:</a></li><li><a href=#reverse-relations>Reverse Relations</a></li></ul><ul><li><a href=#how-authentication-is-determined>How Authentication is determined</a></li><li><a href=#setting-the-authentication-scheme>Setting the authentication scheme</a></li></ul><ul><li><a href=#what-is-jwt>What is JWT?</a></li><li><a href=#how-jwt-works>How JWT works?</a></li><li><a href=#installing-jwt>Installing JWT</a></li><li><a href=#project-configuration>Project Configuration</a></li><li><a href=#generating-tokens>Generating Tokens</a><ul><li><a href=#problem-in-it>Problem In it:</a></li></ul></li><li><a href=#using-refresh-token>Using Refresh Token</a></li></ul></nav></div></details></div><div class=post-content><h1 id=serializer-relationships>Serializer Relationships<a hidden class=anchor aria-hidden=true href=#serializer-relationships>#</a></h1><p>Relational fields are used to represent model relationships. They can be applied to ForeignKey, ManyToManyField and OneToOneField relationships, as well as to reverse relationships</p><p>Consider the following models:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.db <span style=color:#f92672>import</span> models
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Book</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>ForeignKey(Author, on_delete<span style=color:#f92672>=</span>models<span style=color:#f92672>.</span>CASCADE)
</span></span></code></pre></div><h1 id=primary-key-related-field>Primary Key Related Field<a hidden class=anchor aria-hidden=true href=#primary-key-related-field>#</a></h1><p>A primary key related field should present either the queryset or read_only attributed to true.Normally ModelSerializer uses the primary key related field to represent the relationship.PrimaryKeyRelatedField may be used to represent the target of the relationship using its primary key.</p><p>for example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Book
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>PrimaryKeyRelatedField(queryset<span style=color:#f92672>=</span>Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>all())
</span></span></code></pre></div><p>Will serialize like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;The Great Gatsby&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=saving-and-updating-instance-of-primary-key-related-field>Saving and Updating Instance of Primary Key Related Field<a hidden class=anchor aria-hidden=true href=#saving-and-updating-instance-of-primary-key-related-field>#</a></h1><ul><li>One To One Relationship
Request format:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;The Great Gatsby&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Model Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Book
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>]
</span></span></code></pre></div><p>Normal Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>PrimaryKeyRelatedField(queryset<span style=color:#f92672>=</span>Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>all())
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(self, validated_data):
</span></span><span style=display:flex><span>        author <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(author<span style=color:#f92672>=</span>author_instance, <span style=color:#f92672>**</span>validated_data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(self, instance, validated_data):
</span></span><span style=display:flex><span>        author <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author)
</span></span><span style=display:flex><span>        instance<span style=color:#f92672>.</span>author <span style=color:#f92672>=</span> author_instance
</span></span><span style=display:flex><span>        instance<span style=color:#f92672>.</span>title <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>, instance<span style=color:#f92672>.</span>title)
</span></span><span style=display:flex><span>        instance<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> instance
</span></span></code></pre></div><p>Using it in API view to update and save the instance and get the instance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .serializers <span style=color:#f92672>import</span> BookSerializer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookView</span>(APIView):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>post</span>(self, request):
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>patch</span>(self,request,id):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>id)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book, data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data, partial<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span></code></pre></div><ul><li>Foreign Key Relationship</li></ul><p>Request format:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;The Great Gatsby&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Model Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Book
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>]
</span></span></code></pre></div><p>Normal Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>PrimaryKeyRelatedField(queryset<span style=color:#f92672>=</span>Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>all())
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(self, validated_data):
</span></span><span style=display:flex><span>        author <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(author<span style=color:#f92672>=</span>author_instance, <span style=color:#f92672>**</span>validated_data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(self, instance, validated_data):
</span></span><span style=display:flex><span>        author <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author)
</span></span><span style=display:flex><span>        instance<span style=color:#f92672>.</span>author <span style=color:#f92672>=</span> author_instance
</span></span><span style=display:flex><span>        instance<span style=color:#f92672>.</span>title <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>, instance<span style=color:#f92672>.</span>title)
</span></span><span style=display:flex><span>        instance<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> instance
</span></span></code></pre></div><p>Using it in API view to update and save the instance and get the instance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .serializers <span style=color:#f92672>import</span> BookSerializer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookView</span>(APIView):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>post</span>(self, request):
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>patch</span>(self,request,id):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>id)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book, data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data, partial<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span></code></pre></div><ul><li>Many To Many Relationship</li></ul><p>Request format:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;The Great Gatsby&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;author&#34;</span>: [<span style=color:#ae81ff>1</span>, <span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>Model Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Book
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>]
</span></span></code></pre></div><p>Normal Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>PrimaryKeyRelatedField(queryset<span style=color:#f92672>=</span>Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>all(), many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(self, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(<span style=color:#f92672>**</span>validated_data)
</span></span><span style=display:flex><span>        author_instances <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>filter(id__in<span style=color:#f92672>=</span>authors)
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(<span style=color:#f92672>*</span>author_instances)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(self, instance, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> instance
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>title <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>, book<span style=color:#f92672>.</span>title)
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>        author_instances <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>filter(id__in<span style=color:#f92672>=</span>authors)
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>set(author_instances)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span></code></pre></div><p>Using it in API view to update and save the instance and get the instance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .serializers <span style=color:#f92672>import</span> BookSerializer
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookView</span>(APIView):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>post</span>(self, request):
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>patch</span>(self,request,id):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>id)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book, data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data, partial<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span></code></pre></div><h1 id=nested-relationships>Nested Relationships<a hidden class=anchor aria-hidden=true href=#nested-relationships>#</a></h1><p>As opposed to previously discussed references to another entity, the referred entity can instead also be embedded or nested in the representation of the object that refers to it. Such nested relationships can be expressed by using serializers as fields.</p><p>If the field is used to represent a to-many relationship, you should add the <code>many=True</code> flag to the serializer field.</p><p>Example:</p><p>Model:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> django.db <span style=color:#f92672>import</span> models
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Book</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>ManyToManyField(Author,releted_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;books&#39;</span>)
</span></span></code></pre></div><p>Model Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Author
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;id&#39;</span>,<span style=color:#e6db74>&#39;name&#39;</span>]
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> AuthorSerializer(many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Book
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>]
</span></span></code></pre></div><p>Normal Serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    id <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>IntegerField()
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> AuthorSerializer(many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(self, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(<span style=color:#f92672>**</span>validated_data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author[<span style=color:#e6db74>&#39;id&#39;</span>])
</span></span><span style=display:flex><span>            book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(author_instance)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(self, instance, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> instance
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>title <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>, book<span style=color:#f92672>.</span>title)
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author[<span style=color:#e6db74>&#39;id&#39;</span>])
</span></span><span style=display:flex><span>            book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(author_instance)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span></code></pre></div><p>Would serialize to a nested representation like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;The Great Gatsby&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;author&#34;</span>: [
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;F. Scott Fitzgerald&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>        },
</span></span><span style=display:flex><span>        {
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;title&#34;</span>: <span style=color:#e6db74>&#34;Ernest Hemingway&#34;</span>,
</span></span><span style=display:flex><span>            <span style=color:#f92672>&#34;author&#34;</span>: <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=writable-nested-representations>Writable Nested Representations<a hidden class=anchor aria-hidden=true href=#writable-nested-representations>#</a></h1><p>By default nested serializers are read-only. If you want to support write-operations to a nested serializer field you&rsquo;ll need to create create() and/or update() methods in order to explicitly specify how the child relationships should be saved.</p><blockquote><p>Note: Model Serializer by default usages the primary key related field to represent the relationship such that we need not define the create() and update() methods but in case of nested serializer we need to define the create() and update() methods.</p></blockquote><ul><li>Model Serializer:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Author
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;name&#39;</span>]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> AuthorSerializer(many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Book
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;title&#39;</span>, <span style=color:#e6db74>&#39;author&#39;</span>]
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(self, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(<span style=color:#f92672>**</span>validated_data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author[<span style=color:#e6db74>&#39;id&#39;</span>])
</span></span><span style=display:flex><span>            book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(author_instance)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(self, instance, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> instance
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>title <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>, book<span style=color:#f92672>.</span>title)
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author[<span style=color:#e6db74>&#39;id&#39;</span>])
</span></span><span style=display:flex><span>            book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(author_instance)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span></code></pre></div><ul><li>Normal Serializer:</li></ul><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    id <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>IntegerField()
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> AuthorSerializer(many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>create</span>(self, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>create(<span style=color:#f92672>**</span>validated_data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author[<span style=color:#e6db74>&#39;id&#39;</span>])
</span></span><span style=display:flex><span>            book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(author_instance)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>update</span>(self, instance, validated_data):
</span></span><span style=display:flex><span>        authors <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>pop(<span style=color:#e6db74>&#39;author&#39;</span>)
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> instance
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>title <span style=color:#f92672>=</span> validated_data<span style=color:#f92672>.</span>get(<span style=color:#e6db74>&#39;title&#39;</span>, book<span style=color:#f92672>.</span>title)
</span></span><span style=display:flex><span>        book<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>for</span> author <span style=color:#f92672>in</span> authors:
</span></span><span style=display:flex><span>            author_instance <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>author[<span style=color:#e6db74>&#39;id&#39;</span>])
</span></span><span style=display:flex><span>            book<span style=color:#f92672>.</span>author<span style=color:#f92672>.</span>add(author_instance)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> book
</span></span></code></pre></div><p>Using it in API view to update and save the instance and get the instance:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .serializers <span style=color:#f92672>import</span> BookSerializer
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>BookView</span>(APIView):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>post</span>(self, request):
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>patch</span>(self,request,id):
</span></span><span style=display:flex><span>        book <span style=color:#f92672>=</span> Book<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span>id)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> BookSerializer(book, data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data, partial<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> serializer<span style=color:#f92672>.</span>is_valid():
</span></span><span style=display:flex><span>            serializer<span style=color:#f92672>.</span>save()
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>errors)
</span></span></code></pre></div><h1 id=further-notes>Further Notes:<a hidden class=anchor aria-hidden=true href=#further-notes>#</a></h1><h2 id=queryset-attribute>Queryset attribute:<a hidden class=anchor aria-hidden=true href=#queryset-attribute>#</a></h2><ul><li>In version 2.x a serializer class could sometimes automatically determine the queryset argument if a ModelSerializer class was being used.This behavior is now replaced with always using an explicit queryset argument for writable relational fields.</li></ul><h2 id=reverse-relations>Reverse Relations<a hidden class=anchor aria-hidden=true href=#reverse-relations>#</a></h2><p>Note that reverse relationships are not automatically included by the <code>ModelSerializer</code> class. You&rsquo;ll need to add an explicit field for the reverse relationship.for example:</p><p>using model serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorSerializer</span>(serializers<span style=color:#f92672>.</span>ModelSerializer):
</span></span><span style=display:flex><span>    books <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>PrimaryKeyRelatedField(many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, read_only<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Meta</span>:
</span></span><span style=display:flex><span>        model <span style=color:#f92672>=</span> Author
</span></span><span style=display:flex><span>        fields <span style=color:#f92672>=</span> [<span style=color:#e6db74>&#39;id&#39;</span>, <span style=color:#e6db74>&#39;name&#39;</span>, <span style=color:#e6db74>&#39;books&#39;</span>]
</span></span></code></pre></div><p>using normal serializer:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorSerializer</span>(serializers<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    id <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>IntegerField()
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    books <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>PrimaryKeyRelatedField(many<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>, read_only<span style=color:#f92672>=</span><span style=color:#66d9ef>True</span>)
</span></span></code></pre></div><p>You&rsquo;ll normally want to ensure that you&rsquo;ve set an appropriate related_name argument on the relationship, that you can use as the field name. For example:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Author</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    name <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>Book</span>(models<span style=color:#f92672>.</span>Model):
</span></span><span style=display:flex><span>    title <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>    author <span style=color:#f92672>=</span> models<span style=color:#f92672>.</span>ForeignKey(Author, related_name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;books&#39;</span>, on_delete<span style=color:#f92672>=</span>models<span style=color:#f92672>.</span>CASCADE)
</span></span></code></pre></div><p>API view like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .models <span style=color:#f92672>import</span> Author, Book
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> .serializers <span style=color:#f92672>import</span> AuthorSerializer
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>AuthorView</span>(APIView):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request):
</span></span><span style=display:flex><span>        author <span style=color:#f92672>=</span> Author<span style=color:#f92672>.</span>objects<span style=color:#f92672>.</span>get(id<span style=color:#f92672>=</span><span style=color:#ae81ff>1</span>)
</span></span><span style=display:flex><span>        serializer <span style=color:#f92672>=</span> AuthorSerializer(author)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(serializer<span style=color:#f92672>.</span>data)
</span></span></code></pre></div><p>Now the AuthorSerializer will include a field named books that represents the reverse relationship.like this:</p><p>API Response:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;F. Scott Fitzgerald&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;books&#34;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>        <span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h1 id=authentications>Authentications<a hidden class=anchor aria-hidden=true href=#authentications>#</a></h1><p>Authentication is the process of verifying the identity of a user. Authentication always runs at the very start of the view, before the permission and throttling checks occur, and before any other code is allowed to proceed.</p><p>The request.user property will typically be set to an instance of the contrib.auth package&rsquo;s User class.</p><p>The request.auth property is used for any additional authentication information, for example, it may be used to represent an authentication token that the request was signed with.</p><blockquote><p>Note: Don&rsquo;t forget that authentication by itself won&rsquo;t allow or disallow an incoming request, it simply identifies the credentials that the request was made with.The permission class then decides if the request should be authorized or not.</p></blockquote><h2 id=how-authentication-is-determined>How Authentication is determined<a hidden class=anchor aria-hidden=true href=#how-authentication-is-determined>#</a></h2><p>The authentication schemes are always defined as a list of classes. REST framework will attempt to authenticate with each class in the list, and will set request.user and request.auth using the return value of the first class that successfully authenticates.If no class authenticates, request.user will be set to an instance of django.contrib.auth.models.AnonymousUser, and request.auth will be set to None</p><h2 id=setting-the-authentication-scheme>Setting the authentication scheme<a hidden class=anchor aria-hidden=true href=#setting-the-authentication-scheme>#</a></h2><p>The default authentication schemes may be set globally, using the DEFAULT_AUTHENTICATION_CLASSES setting. For example.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>REST_FRAMEWORK <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;rest_framework.authentication.BasicAuthentication&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;rest_framework.authentication.SessionAuthentication&#39;</span>,
</span></span><span style=display:flex><span>    ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>You can also set the authentication scheme on a per-view or per-viewset basis, using the APIView class-based views.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.authentication <span style=color:#f92672>import</span> SessionAuthentication, BasicAuthentication
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.permissions <span style=color:#f92672>import</span> IsAuthenticated
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.views <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleView</span>(APIView):
</span></span><span style=display:flex><span>    authentication_classes <span style=color:#f92672>=</span> [SessionAuthentication, BasicAuthentication]
</span></span><span style=display:flex><span>    permission_classes <span style=color:#f92672>=</span> [IsAuthenticated]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request, format<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        content <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;user&#39;</span>: str(request<span style=color:#f92672>.</span>user),  <span style=color:#75715e># `django.contrib.auth.User` instance.</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;auth&#39;</span>: str(request<span style=color:#f92672>.</span>auth),  <span style=color:#75715e># None</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(content)
</span></span></code></pre></div><blockquote><p>Insted of using Token,session and basic authentication we can also use custom authentication.</p></blockquote><h1 id=jwt-authentication>JWT Authentication<a hidden class=anchor aria-hidden=true href=#jwt-authentication>#</a></h1><p>In this section, we will learn how to implement JWT authentication in Django REST framework.</p><h2 id=what-is-jwt>What is JWT?<a hidden class=anchor aria-hidden=true href=#what-is-jwt>#</a></h2><p>JSON Web Token is a fairly new standard which can be used for token-based authentication. Unlike the built-in TokenAuthentication scheme, JWT Authentication doesn&rsquo;t need to use a database to validate a token because it is self-validated. This means that the server doesn&rsquo;t need to query the database to check if the token is valid.</p><h2 id=how-jwt-works>How JWT works?<a hidden class=anchor aria-hidden=true href=#how-jwt-works>#</a></h2><p>When a user logs in, the server will generate a token and send it to the client. The client will store the token and send it with every request. The server will then validate the token and allow the user to access protected resources.</p><h2 id=installing-jwt>Installing JWT<a hidden class=anchor aria-hidden=true href=#installing-jwt>#</a></h2><p>To install JWT, you need to install the <code>djangorestframework_simplejwt</code> package. You can install it using pip:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>pip install djangorestframework-simplejwt
</span></span></code></pre></div><h2 id=project-configuration>Project Configuration<a hidden class=anchor aria-hidden=true href=#project-configuration>#</a></h2><p>Then, your django project must be configured to use the library. In settings.py, add rest_framework_simplejwt.authentication.JWTAuthentication to the list of authentication classes:</p><p>This set default authentication to JWTAuthentication globally.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span>REST_FRAMEWORK <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;DEFAULT_AUTHENTICATION_CLASSES&#39;</span>: [
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;rest_framework_simplejwt.authentication.JWTAuthentication&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#75715e>#other authentication classes</span>
</span></span><span style=display:flex><span>    ],
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>but you can also set it on a per-view basis.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework_simplejwt.authentication <span style=color:#f92672>import</span> JWTAuthentication
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.permissions <span style=color:#f92672>import</span> IsAuthenticated
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.views <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>ExampleView</span>(APIView):
</span></span><span style=display:flex><span>    authentication_classes <span style=color:#f92672>=</span> [JWTAuthentication]
</span></span><span style=display:flex><span>    permission_classes <span style=color:#f92672>=</span> [IsAuthenticated]
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>get</span>(self, request, format<span style=color:#f92672>=</span><span style=color:#66d9ef>None</span>):
</span></span><span style=display:flex><span>        content <span style=color:#f92672>=</span> {
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;user&#39;</span>: str(request<span style=color:#f92672>.</span>user),  <span style=color:#75715e># `django.contrib.auth.User` instance.</span>
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;auth&#39;</span>: str(request<span style=color:#f92672>.</span>auth),  <span style=color:#75715e># None</span>
</span></span><span style=display:flex><span>        }
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>return</span> Response(content)
</span></span></code></pre></div><blockquote><p>Note view level authentication will have more priority than global authentication.
In every request authentication will be check if authentication is set either in view or globally.and authentication winot restrict the request but it will only identify the user so we have to use permission classes to restrict the request.</p></blockquote><h2 id=generating-tokens>Generating Tokens<a hidden class=anchor aria-hidden=true href=#generating-tokens>#</a></h2><p>To generate a token, you can use the <code>TokenObtainPairView</code> view. This view will generate a token for a user. You can use this token to authenticate the user in subsequent requests.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework_simplejwt.views <span style=color:#f92672>import</span> TokenObtainPairView
</span></span><span style=display:flex><span>urlpatterns <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#39;api/token/&#39;</span>, TokenObtainPairView<span style=color:#f92672>.</span>as_view(), name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;token_obtain_pair&#39;</span>),
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><p>The request on <code>/api/token/</code> will return a response like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;admin&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;password&#34;</span>: <span style=color:#e6db74>&#34;admin&#34;</span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>will return a response like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;access&#34;</span>: <span style=color:#e6db74>&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;refresh&#34;</span>: <span style=color:#e6db74>&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>The refresh token is used to get a new access token when the access token expires.The ascess token is send in every request where authentication class determines which user is making the request while permission class determines whether the user is allowed to make the request or not.if not allowed then it will return 403 forbidden.</p><h3 id=problem-in-it>Problem In it:<a hidden class=anchor aria-hidden=true href=#problem-in-it>#</a></h3><p><code>TokenObtainPairView</code> will always user username and password to generate the token but in some cases we need to use email and password to generate the token so we can create our own view to generate the token.so if we have custom user model and authentication then we can create our own view to generate the token.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework_simplejwt.tokens <span style=color:#f92672>import</span> RefreshToken
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> django.contrib.auth <span style=color:#f92672>import</span> authenticate
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.views <span style=color:#f92672>import</span> APIView
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework.response <span style=color:#f92672>import</span> Response
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework <span style=color:#f92672>import</span> serializers
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>TokenSerializer</span>(serializer<span style=color:#f92672>.</span>Serializer):
</span></span><span style=display:flex><span>    email <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>EmailField()
</span></span><span style=display:flex><span>    password <span style=color:#f92672>=</span> serializers<span style=color:#f92672>.</span>CharField(max_length<span style=color:#f92672>=</span><span style=color:#ae81ff>100</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>class</span> <span style=color:#a6e22e>GetToken</span>(APIView):
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>def</span> <span style=color:#a6e22e>post</span>(self, request):
</span></span><span style=display:flex><span>        credentials <span style=color:#f92672>=</span> TokenSerializer(data<span style=color:#f92672>=</span>request<span style=color:#f92672>.</span>data)
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span>(credentials<span style=color:#f92672>.</span>is_valid()):
</span></span><span style=display:flex><span>            user <span style=color:#f92672>=</span> authenticate(email<span style=color:#f92672>=</span>credentials<span style=color:#f92672>.</span>validated_data[<span style=color:#e6db74>&#39;email&#39;</span>], password<span style=color:#f92672>=</span>credentials<span style=color:#f92672>.</span>validated_data[<span style=color:#e6db74>&#39;password&#39;</span>])
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> user <span style=color:#f92672>is</span> <span style=color:#f92672>not</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>                refresh <span style=color:#f92672>=</span> RefreshToken<span style=color:#f92672>.</span>for_user(user)
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> Response({
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;refresh&#39;</span>: str(refresh),
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;access&#39;</span>: str(refresh<span style=color:#f92672>.</span>access_token)
</span></span><span style=display:flex><span>                })
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>                <span style=color:#66d9ef>return</span> Response({
</span></span><span style=display:flex><span>                    <span style=color:#e6db74>&#39;error&#39;</span>: <span style=color:#e6db74>&#39;Invalid Credentials&#39;</span>
</span></span><span style=display:flex><span>                })
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>else</span>:
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>return</span> Response({
</span></span><span style=display:flex><span>                <span style=color:#e6db74>&#39;error&#39;</span>: <span style=color:#e6db74>&#39;Invalid Data&#39;</span>
</span></span><span style=display:flex><span>            })
</span></span></code></pre></div><h2 id=using-refresh-token>Using Refresh Token<a hidden class=anchor aria-hidden=true href=#using-refresh-token>#</a></h2><p>If the ascess token is expired then we can use the refresh token to get the new access token.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>from</span> rest_framework_simplejwt.views <span style=color:#f92672>import</span> TokenRefreshView
</span></span><span style=display:flex><span>urlpatterns <span style=color:#f92672>=</span> [
</span></span><span style=display:flex><span>    path(<span style=color:#e6db74>&#39;api/token/refresh/&#39;</span>, TokenRefreshView<span style=color:#f92672>.</span>as_view(), name<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;token_refresh&#39;</span>),
</span></span><span style=display:flex><span>]
</span></span></code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span> <span style=color:#f92672>&#34;refresh&#34;</span>: <span style=color:#e6db74>&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z&#34;</span>
</span></span><span style=display:flex><span> }
</span></span></code></pre></div><p>The request on <code>/api/token/refresh/</code> will return a response like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;access&#34;</span>: <span style=color:#e6db74>&#34;eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJ1c2VybmFtZSI6ImFkbWluIiwiZXhwIjoxNjI5MzYwNjY4LCJlbWFpbCI6IiJ9.7Z&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>##</span> <span style=color:#960050;background-color:#1e0010>Verifying</span> <span style=color:#960050;background-color:#1e0010>Tokens</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>To</span> <span style=color:#960050;background-color:#1e0010>verify</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>token,</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>use</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>`TokenVerifyView`</span> <span style=color:#960050;background-color:#1e0010>view.</span> <span style=color:#960050;background-color:#1e0010>This</span> <span style=color:#960050;background-color:#1e0010>view</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>verify</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>return</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>response.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework_simplejwt.views</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>TokenVerifyView</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>urlpatterns</span> <span style=color:#960050;background-color:#1e0010>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>path(&#39;api/token/verify/&#39;</span>, <span style=color:#960050;background-color:#1e0010>TokenVerifyView.as_view()</span>, <span style=color:#960050;background-color:#1e0010>name=&#39;token_verify&#39;)</span>,
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>##</span> <span style=color:#960050;background-color:#1e0010>Backlisting</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>token</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>First</span>  <span style=color:#960050;background-color:#1e0010>add</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>blacklist</span> <span style=color:#960050;background-color:#1e0010>app</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>your</span> <span style=color:#960050;background-color:#1e0010>installed</span> <span style=color:#960050;background-color:#1e0010>apps:</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>INSTALLED_APPS</span> <span style=color:#960050;background-color:#1e0010>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>...</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>&#39;rest_framework_simplejwt.token_blacklist&#39;</span>,
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Then</span> <span style=color:#960050;background-color:#1e0010>run</span> <span style=color:#960050;background-color:#1e0010>python</span> <span style=color:#960050;background-color:#1e0010>manage.py</span> <span style=color:#960050;background-color:#1e0010>migrate</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>create</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>necessary</span> <span style=color:#960050;background-color:#1e0010>database</span> <span style=color:#960050;background-color:#1e0010>tables.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Then</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>backlist</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>use</span> <span style=color:#960050;background-color:#1e0010>.blacklist()</span> <span style=color:#960050;background-color:#1e0010>method</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>object.</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework_simplejwt.views</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>APIView</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework.response</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>Response</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework_simplejwt.tokens</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>RefreshToken</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>class</span> <span style=color:#960050;background-color:#1e0010>LogoutView(APIView):</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>def</span> <span style=color:#960050;background-color:#1e0010>post(self,</span> <span style=color:#960050;background-color:#1e0010>request):</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>try:</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>refresh_token</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>request.data.get</span>[<span style=color:#960050;background-color:#1e0010>&#39;refresh&#39;</span>]
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>RefreshToken(refresh_token)</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>token.blacklist()</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>return</span> <span style=color:#960050;background-color:#1e0010>Response(</span>{<span style=color:#960050;background-color:#1e0010>&#39;message&#39;:</span> <span style=color:#960050;background-color:#1e0010>&#39;Token</span> <span style=color:#960050;background-color:#1e0010>blacklisted&#39;</span>}<span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>except</span> <span style=color:#960050;background-color:#1e0010>Exception</span> <span style=color:#960050;background-color:#1e0010>as</span> <span style=color:#960050;background-color:#1e0010>e:</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>return</span> <span style=color:#960050;background-color:#1e0010>Response(</span>{<span style=color:#960050;background-color:#1e0010>&#39;error&#39;:</span> <span style=color:#960050;background-color:#1e0010>str(e)</span>}<span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>else</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>use</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>`TokenBlacklistView`</span> <span style=color:#960050;background-color:#1e0010>view</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>blacklist</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>token.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework_simplejwt.views</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>TokenBlacklistView</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>urlpatterns</span> <span style=color:#960050;background-color:#1e0010>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>path(&#39;api/token/blacklist/&#39;</span>, <span style=color:#960050;background-color:#1e0010>TokenBlacklistView.as_view()</span>, <span style=color:#960050;background-color:#1e0010>name=&#39;token_blacklist&#39;)</span>,
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>Add</span> <span style=color:#960050;background-color:#1e0010>any</span> <span style=color:#960050;background-color:#1e0010>other</span> <span style=color:#960050;background-color:#1e0010>urlpatterns</span> <span style=color:#960050;background-color:#1e0010>here</span> <span style=color:#960050;background-color:#1e0010>if</span> <span style=color:#960050;background-color:#1e0010>needed</span>
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>This</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>specifically</span> <span style=color:#960050;background-color:#1e0010>for</span> <span style=color:#960050;background-color:#1e0010>blacklisting</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>token.</span> <span style=color:#960050;background-color:#1e0010>when</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>same</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>won&#39;t</span> <span style=color:#960050;background-color:#1e0010>be</span> <span style=color:#960050;background-color:#1e0010>used</span> <span style=color:#960050;background-color:#1e0010>again.and</span> <span style=color:#960050;background-color:#1e0010>used</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>logout</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>user.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>##</span> <span style=color:#960050;background-color:#1e0010>How</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>send</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>request</span> <span style=color:#960050;background-color:#1e0010>for</span> <span style=color:#960050;background-color:#1e0010>authentication</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>authorization</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>suppose</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>route</span> <span style=color:#960050;background-color:#1e0010>`/api/shop`</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>protected</span> <span style=color:#960050;background-color:#1e0010>by</span> <span style=color:#960050;background-color:#1e0010>authentication</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>authorization</span> <span style=color:#960050;background-color:#1e0010>then</span> <span style=color:#960050;background-color:#1e0010>we</span> <span style=color:#960050;background-color:#1e0010>have</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>send</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>request</span> <span style=color:#960050;background-color:#1e0010>header.</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Authorization</span> <span style=color:#960050;background-color:#1e0010>:</span> <span style=color:#960050;background-color:#1e0010>Bearer</span> <span style=color:#960050;background-color:#1e0010>&lt;token&gt;</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;book&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;price&#34;</span>: <span style=color:#ae81ff>100</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>##</span> <span style=color:#960050;background-color:#1e0010>Some</span> <span style=color:#960050;background-color:#1e0010>Expiration</span> <span style=color:#960050;background-color:#1e0010>settings</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>SIMPLE_JWT</span> <span style=color:#960050;background-color:#1e0010>=</span> {<span style=color:#f92672>&#34;ACCESS_TOKEN_LIFETIME&#34;</span>: <span style=color:#960050;background-color:#1e0010>timedelta(minutes=</span><span style=color:#ae81ff>5</span><span style=color:#960050;background-color:#1e0010>)</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;REFRESH_TOKEN_LIFETIME&#34;</span>: <span style=color:#960050;background-color:#1e0010>timedelta(days=</span><span style=color:#ae81ff>1</span><span style=color:#960050;background-color:#1e0010>)</span>,
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>This</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>set</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>access</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>lifetime</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#ae81ff>5</span> <span style=color:#960050;background-color:#1e0010>minutes</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>refresh</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>lifetime</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#ae81ff>1</span> <span style=color:#960050;background-color:#1e0010>day.</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>##</span> <span style=color:#960050;background-color:#1e0010>Sending</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>important</span> <span style=color:#960050;background-color:#1e0010>data</span> <span style=color:#960050;background-color:#1e0010>using</span> <span style=color:#960050;background-color:#1e0010>jwt</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>drf</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>Normally</span> <span style=color:#960050;background-color:#1e0010>for</span> <span style=color:#960050;background-color:#1e0010>obtaining</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>Django</span> <span style=color:#960050;background-color:#1e0010>Rest</span> <span style=color:#960050;background-color:#1e0010>Framework,</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>would</span> <span style=color:#960050;background-color:#1e0010>use</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>`TokenObtainPairView`</span> <span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>`rest_framework_simplejwt`</span> <span style=color:#960050;background-color:#1e0010>package.</span> <span style=color:#960050;background-color:#1e0010>Below</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>an</span> <span style=color:#960050;background-color:#1e0010>example</span> <span style=color:#960050;background-color:#1e0010>of</span> <span style=color:#960050;background-color:#1e0010>how</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>set</span> <span style=color:#960050;background-color:#1e0010>up</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>URL</span> <span style=color:#960050;background-color:#1e0010>configuration</span> <span style=color:#960050;background-color:#1e0010>for</span> <span style=color:#960050;background-color:#1e0010>obtaining</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>JWT</span> <span style=color:#960050;background-color:#1e0010>token.</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework_simplejwt.serializers</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>TokenObtainPairSerializer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>url_patterns</span> <span style=color:#960050;background-color:#1e0010>=</span> [
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>path(&#39;api/token/&#39;</span>, <span style=color:#960050;background-color:#1e0010>TokenObtainPairView.as_view()</span>, <span style=color:#960050;background-color:#1e0010>name=&#39;token_obtain_pair&#39;)</span>,
</span></span><span style=display:flex><span>]
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>This</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>allow</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>obtain</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>JWT</span> <span style=color:#960050;background-color:#1e0010>token</span> <span style=color:#960050;background-color:#1e0010>by</span> <span style=color:#960050;background-color:#1e0010>sending</span> <span style=color:#960050;background-color:#1e0010>a</span> <span style=color:#960050;background-color:#1e0010>POST</span> <span style=color:#960050;background-color:#1e0010>request</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>`/api/token/`</span> <span style=color:#960050;background-color:#1e0010>with</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>user&#39;s</span> <span style=color:#960050;background-color:#1e0010>credentials</span> <span style=color:#960050;background-color:#1e0010>(username</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>password).</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;your_username&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;password&#34;</span>: <span style=color:#e6db74>&#34;your_password&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;refresh&#34;</span>: <span style=color:#e6db74>&#34;your_refresh_token&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;access&#34;</span>: <span style=color:#e6db74>&#34;your_access_token&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>when</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>decode</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>JWT</span> <span style=color:#960050;background-color:#1e0010>token,</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>get</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>following</span> <span style=color:#960050;background-color:#1e0010>data:</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;user_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;your_username&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;exp&#34;</span>: <span style=color:#ae81ff>1700000000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;iat&#34;</span>: <span style=color:#ae81ff>1700000000</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>If</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>want</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>send</span> <span style=color:#960050;background-color:#1e0010>additional</span> <span style=color:#960050;background-color:#1e0010>data</span> <span style=color:#960050;background-color:#1e0010>in</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>JWT</span> <span style=color:#960050;background-color:#1e0010>token,</span> <span style=color:#960050;background-color:#1e0010>do</span> <span style=color:#960050;background-color:#1e0010>like</span> <span style=color:#960050;background-color:#1e0010>this:</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```python</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>#import</span> <span style=color:#960050;background-color:#1e0010>refresh</span> <span style=color:#960050;background-color:#1e0010>tokem</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework_simplejwt.token</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>RefreshToken</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>from</span> <span style=color:#960050;background-color:#1e0010>rest_framework.views</span> <span style=color:#960050;background-color:#1e0010>import</span> <span style=color:#960050;background-color:#1e0010>APIView</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>class</span> <span style=color:#960050;background-color:#1e0010>TokenView(APIView):</span>
</span></span><span style=display:flex><span>    <span style=color:#960050;background-color:#1e0010>def</span> <span style=color:#960050;background-color:#1e0010>post(self,</span> <span style=color:#960050;background-color:#1e0010>request):</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>username</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>request.data.get(&#39;username&#39;)</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>password</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>request.data.get(&#39;password&#39;)</span>  
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>#Note</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>use</span> <span style=color:#960050;background-color:#1e0010>serializers</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>validate</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>request</span> <span style=color:#960050;background-color:#1e0010>data</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>user</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>authenticate(username=username,</span> <span style=color:#960050;background-color:#1e0010>password=password)</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>if</span> <span style=color:#960050;background-color:#1e0010>user</span> <span style=color:#960050;background-color:#1e0010>is</span> <span style=color:#960050;background-color:#1e0010>not</span> <span style=color:#960050;background-color:#1e0010>None:</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>refresh</span> <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>RefreshToken.for_user(user)</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>#</span> <span style=color:#960050;background-color:#1e0010>Add</span> <span style=color:#960050;background-color:#1e0010>custom</span> <span style=color:#960050;background-color:#1e0010>claims</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>refresh</span>[<span style=color:#960050;background-color:#1e0010>&#39;role&#39;</span>] <span style=color:#960050;background-color:#1e0010>=</span> <span style=color:#960050;background-color:#1e0010>user.username.role</span>
</span></span><span style=display:flex><span>            <span style=color:#960050;background-color:#1e0010>return</span> <span style=color:#960050;background-color:#1e0010>Response(</span>{
</span></span><span style=display:flex><span>                <span style=color:#960050;background-color:#1e0010>&#39;refresh&#39;:</span> <span style=color:#960050;background-color:#1e0010>str(refresh),</span>
</span></span><span style=display:flex><span>                <span style=color:#960050;background-color:#1e0010>&#39;access&#39;:</span> <span style=color:#960050;background-color:#1e0010>str(refresh.access_token),</span>
</span></span><span style=display:flex><span>            }<span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span>        <span style=color:#960050;background-color:#1e0010>return</span> <span style=color:#960050;background-color:#1e0010>Response(</span>{<span style=color:#960050;background-color:#1e0010>&#39;error&#39;:</span> <span style=color:#960050;background-color:#1e0010>&#39;Invalid</span> <span style=color:#960050;background-color:#1e0010>credentials&#39;</span>}<span style=color:#960050;background-color:#1e0010>,</span> <span style=color:#960050;background-color:#1e0010>status=</span><span style=color:#ae81ff>400</span><span style=color:#960050;background-color:#1e0010>)</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>This</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>add</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>`user_id`</span> <span style=color:#960050;background-color:#1e0010>and</span> <span style=color:#960050;background-color:#1e0010>`username`</span> <span style=color:#960050;background-color:#1e0010>to</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>JWT</span> <span style=color:#960050;background-color:#1e0010>token,</span> <span style=color:#960050;background-color:#1e0010>which</span> <span style=color:#960050;background-color:#1e0010>can</span> <span style=color:#960050;background-color:#1e0010>be</span> <span style=color:#960050;background-color:#1e0010>accessed</span> <span style=color:#960050;background-color:#1e0010>when</span> <span style=color:#960050;background-color:#1e0010>decoding</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>token.</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;your_username&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;password&#34;</span>: <span style=color:#e6db74>&#34;your_password&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>return:</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;refresh&#34;</span>: <span style=color:#e6db74>&#34;your_refresh_token&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;access&#34;</span>: <span style=color:#e6db74>&#34;your_access_token&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>And</span> <span style=color:#960050;background-color:#1e0010>when</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>decode</span> <span style=color:#960050;background-color:#1e0010>the</span> <span style=color:#960050;background-color:#1e0010>JWT</span> <span style=color:#960050;background-color:#1e0010>token,</span> <span style=color:#960050;background-color:#1e0010>you</span> <span style=color:#960050;background-color:#1e0010>will</span> <span style=color:#960050;background-color:#1e0010>get:</span>
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```json</span>
</span></span><span style=display:flex><span>{
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;user_id&#34;</span>: <span style=color:#ae81ff>1</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;username&#34;</span>: <span style=color:#e6db74>&#34;your_username&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;exp&#34;</span>: <span style=color:#ae81ff>1700000000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;iat&#34;</span>: <span style=color:#ae81ff>1700000000</span>,
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;role&#34;</span>: <span style=color:#e6db74>&#34;your_user_role&#34;</span>
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#960050;background-color:#1e0010>```bash</span>
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=http://localhost:1313/tags/django/>Django</a></li><li><a href=http://localhost:1313/tags/python/>Python</a></li><li><a href=http://localhost:1313/tags/drf/>DRF</a></li><li><a href=http://localhost:1313/tags/jwt/>JWT</a></li><li><a href=http://localhost:1313/tags/authentication/>Authentication</a></li><li><a href=http://localhost:1313/tags/backend/>Backend</a></li><li><a href=http://localhost:1313/tags/web-development/>Web Development</a></li></ul><nav class=paginav><a class=prev href=http://localhost:1313/posts/pages/drf/drf4/><span class=title>« Prev</span><br><span>DRF : Day 4</span>
</a><a class=next href=http://localhost:1313/posts/pages/drf/drf2/><span class=title>Next »</span><br><span>DRF : Day 2</span></a></nav><ul class=share-buttons><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on x" href="https://x.com/intent/tweet/?text=DRF%20%3a%20Day%203&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f&amp;hashtags=Django%2cPython%2cDRF%2cJWT%2cAuthentication%2cBackend%2cWebDevelopment"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446C483.971.0 512 28.03 512 62.554zM269.951 190.75 182.567 75.216H56L207.216 272.95 63.9 436.783h61.366L235.9 310.383l96.667 126.4H456L298.367 228.367l134-153.151H371.033zM127.633 110h36.468l219.38 290.065H349.5z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on linkedin" href="https://www.linkedin.com/shareArticle?mini=true&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f&amp;title=DRF%20%3a%20Day%203&amp;summary=DRF%20%3a%20Day%203&amp;source=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM160.461 423.278V197.561h-75.04v225.717h75.04zm270.539.0V293.839c0-69.333-37.018-101.586-86.381-101.586-39.804.0-57.634 21.891-67.617 37.266v-31.958h-75.021c.995 21.181.0 225.717.0 225.717h75.02V297.222c0-6.748.486-13.492 2.474-18.315 5.414-13.475 17.767-27.434 38.494-27.434 27.135.0 38.007 20.707 38.007 51.037v120.768H431zM123.448 88.722C97.774 88.722 81 105.601 81 127.724c0 21.658 16.264 39.002 41.455 39.002h.484c26.165.0 42.452-17.344 42.452-39.002-.485-22.092-16.241-38.954-41.943-39.002z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on reddit" href="https://reddit.com/submit?url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f&title=DRF%20%3a%20Day%203"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zM446 265.638c0-22.964-18.616-41.58-41.58-41.58-11.211.0-21.361 4.457-28.841 11.666-28.424-20.508-67.586-33.757-111.204-35.278l18.941-89.121 61.884 13.157c.756 15.734 13.642 28.29 29.56 28.29 16.407.0 29.706-13.299 29.706-29.701.0-16.403-13.299-29.702-29.706-29.702-11.666.0-21.657 6.792-26.515 16.578l-69.105-14.69c-1.922-.418-3.939-.042-5.585 1.036-1.658 1.073-2.811 2.761-3.224 4.686l-21.152 99.438c-44.258 1.228-84.046 14.494-112.837 35.232-7.468-7.164-17.589-11.591-28.757-11.591-22.965.0-41.585 18.616-41.585 41.58.0 16.896 10.095 31.41 24.568 37.918-.639 4.135-.99 8.328-.99 12.576.0 63.977 74.469 115.836 166.33 115.836s166.334-51.859 166.334-115.836c0-4.218-.347-8.387-.977-12.493 14.564-6.47 24.735-21.034 24.735-38.001zM326.526 373.831c-20.27 20.241-59.115 21.816-70.534 21.816-11.428.0-50.277-1.575-70.522-21.82-3.007-3.008-3.007-7.882.0-10.889 3.003-2.999 7.882-3.003 10.885.0 12.777 12.781 40.11 17.317 59.637 17.317 19.522.0 46.86-4.536 59.657-17.321 3.016-2.999 7.886-2.995 10.885.008 3.008 3.011 3.003 7.882-.008 10.889zm-5.23-48.781c-16.373.0-29.701-13.324-29.701-29.698.0-16.381 13.328-29.714 29.701-29.714 16.378.0 29.706 13.333 29.706 29.714.0 16.374-13.328 29.698-29.706 29.698zM160.91 295.348c0-16.381 13.328-29.71 29.714-29.71 16.369.0 29.689 13.329 29.689 29.71.0 16.373-13.32 29.693-29.689 29.693-16.386.0-29.714-13.32-29.714-29.693z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on facebook" href="https://facebook.com/sharer/sharer.php?u=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H342.978V319.085h66.6l12.672-82.621h-79.272v-53.617c0-22.603 11.073-44.636 46.58-44.636H425.6v-70.34s-32.71-5.582-63.982-5.582c-65.288.0-107.96 39.569-107.96 111.204v62.971h-72.573v82.621h72.573V512h-191.104c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on whatsapp" href="https://api.whatsapp.com/send?text=DRF%20%3a%20Day%203%20-%20http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f"><svg viewBox="0 0 512 512" height="30" width="30" fill="currentcolor"><path d="M449.446.0C483.971.0 512 28.03 512 62.554v386.892C512 483.97 483.97 512 449.446 512H62.554c-34.524.0-62.554-28.03-62.554-62.554V62.554c0-34.524 28.029-62.554 62.554-62.554h386.892zm-58.673 127.703c-33.842-33.881-78.847-52.548-126.798-52.568-98.799.0-179.21 80.405-179.249 179.234-.013 31.593 8.241 62.428 23.927 89.612l-25.429 92.884 95.021-24.925c26.181 14.28 55.659 21.807 85.658 21.816h.074c98.789.0 179.206-80.413 179.247-179.243.018-47.895-18.61-92.93-52.451-126.81zM263.976 403.485h-.06c-26.734-.01-52.954-7.193-75.828-20.767l-5.441-3.229-56.386 14.792 15.05-54.977-3.542-5.637c-14.913-23.72-22.791-51.136-22.779-79.287.033-82.142 66.867-148.971 149.046-148.971 39.793.014 77.199 15.531 105.329 43.692 28.128 28.16 43.609 65.592 43.594 105.4-.034 82.149-66.866 148.983-148.983 148.984zm81.721-111.581c-4.479-2.242-26.499-13.075-30.604-14.571-4.105-1.495-7.091-2.241-10.077 2.241-2.986 4.483-11.569 14.572-14.182 17.562-2.612 2.988-5.225 3.364-9.703 1.12-4.479-2.241-18.91-6.97-36.017-22.23C231.8 264.15 222.81 249.484 220.198 245s-.279-6.908 1.963-9.14c2.016-2.007 4.48-5.232 6.719-7.847 2.24-2.615 2.986-4.484 4.479-7.472 1.493-2.99.747-5.604-.374-7.846-1.119-2.241-10.077-24.288-13.809-33.256-3.635-8.733-7.327-7.55-10.077-7.688-2.609-.13-5.598-.158-8.583-.158-2.986.0-7.839 1.121-11.944 5.604-4.105 4.484-15.675 15.32-15.675 37.364.0 22.046 16.048 43.342 18.287 46.332 2.24 2.99 31.582 48.227 76.511 67.627 10.685 4.615 19.028 7.371 25.533 9.434 10.728 3.41 20.492 2.929 28.209 1.775 8.605-1.285 26.499-10.833 30.231-21.295 3.732-10.464 3.732-19.431 2.612-21.298-1.119-1.869-4.105-2.99-8.583-5.232z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on telegram" href="https://telegram.me/share/url?text=DRF%20%3a%20Day%203&amp;url=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f"><svg viewBox="2 2 28 28" height="30" width="30" fill="currentcolor"><path d="M26.49 29.86H5.5a3.37 3.37.0 01-2.47-1 3.35 3.35.0 01-1-2.47V5.48A3.36 3.36.0 013 3 3.37 3.37.0 015.5 2h21A3.38 3.38.0 0129 3a3.36 3.36.0 011 2.46V26.37a3.35 3.35.0 01-1 2.47 3.38 3.38.0 01-2.51 1.02zm-5.38-6.71a.79.79.0 00.85-.66L24.73 9.24a.55.55.0 00-.18-.46.62.62.0 00-.41-.17q-.08.0-16.53 6.11a.59.59.0 00-.41.59.57.57.0 00.43.52l4 1.24 1.61 4.83a.62.62.0 00.63.43.56.56.0 00.4-.17L16.54 20l4.09 3A.9.9.0 0021.11 23.15zM13.8 20.71l-1.21-4q8.72-5.55 8.78-5.55c.15.0.23.0.23.16a.18.18.0 010 .06s-2.51 2.3-7.52 6.8z"/></svg></a></li><li><a target=_blank rel="noopener noreferrer" aria-label="share DRF : Day 3 on ycombinator" href="https://news.ycombinator.com/submitlink?t=DRF%20%3a%20Day%203&u=http%3a%2f%2flocalhost%3a1313%2fposts%2fpages%2fdrf%2fdrf3%2f"><svg width="30" height="30" viewBox="0 0 512 512" fill="currentcolor" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"><path d="M449.446.0C483.971.0 512 28.03 512 62.554V449.446C512 483.97 483.97 512 449.446 512H62.554C28.03 512 0 483.97.0 449.446V62.554C0 28.03 28.029.0 62.554.0H449.446zM183.8767 87.9921h-62.034L230.6673 292.4508V424.0079h50.6655V292.4508L390.1575 87.9921H328.1233L256 238.2489z"/></svg></a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=http://localhost:1313/>Quick Reference</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg>
</a><script src=https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.min.js></script><script>const theme=localStorage.getItem("pref-theme")==="dark"?"dark":"default";mermaid.initialize({startOnLoad:!0,theme,securityLevel:"loose"})</script><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(e=>{const n=e.parentNode.parentNode,t=document.createElement("button");t.classList.add("copy-code"),t.innerHTML="copy";function s(){t.innerHTML="copied!",setTimeout(()=>{t.innerHTML="copy"},2e3)}t.addEventListener("click",t=>{if("clipboard"in navigator){navigator.clipboard.writeText(e.textContent),s();return}const n=document.createRange();n.selectNodeContents(e);const o=window.getSelection();o.removeAllRanges(),o.addRange(n);try{document.execCommand("copy"),s()}catch{}o.removeRange(n)}),n.classList.contains("highlight")?n.appendChild(t):n.parentNode.firstChild==n||(e.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?e.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(t):e.parentNode.appendChild(t))})</script></body></html>